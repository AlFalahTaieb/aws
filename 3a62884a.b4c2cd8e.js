(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{123:function(e,t,a){"use strict";a.d(t,"a",(function(){return p})),a.d(t,"b",(function(){return O}));var n=a(0),r=a.n(n);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var i=r.a.createContext({}),s=function(e){var t=r.a.useContext(i),a=t;return e&&(a="function"==typeof e?e(t):c(c({},t),e)),a},p=function(e){var t=s(e.components);return r.a.createElement(i.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},m=r.a.forwardRef((function(e,t){var a=e.components,n=e.mdxType,o=e.originalType,b=e.parentName,i=l(e,["components","mdxType","originalType","parentName"]),p=s(a),m=n,O=p["".concat(b,".").concat(m)]||p[m]||u[m]||o;return a?r.a.createElement(O,c(c({ref:t},i),{},{components:a})):r.a.createElement(O,c({ref:t},i))}));function O(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=a.length,b=new Array(o);b[0]=m;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c.mdxType="string"==typeof e?e:n,b[1]=c;for(var i=2;i<o;i++)b[i]=a[i];return r.a.createElement.apply(null,b)}return r.a.createElement.apply(null,a)}m.displayName="MDXCreateElement"},80:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return b})),a.d(t,"metadata",(function(){return c})),a.d(t,"rightToc",(function(){return l})),a.d(t,"default",(function(){return s}));var n=a(2),r=a(6),o=(a(0),a(123)),b={id:"notes",sidebar_label:"Notes for AWS Certified Solutions Architect Associate",title:"Notes for AWS Certified Solutions Architect Associate"},c={unversionedId:"notes",id:"notes",isDocsHomePage:!1,title:"Notes for AWS Certified Solutions Architect Associate",description:"Contents",source:"@site/docs/notes.md",slug:"/notes",permalink:"/aws/docs/notes",version:"current",sidebar_label:"Notes for AWS Certified Solutions Architect Associate",sidebar:"someSidebar",previous:{title:"Five Pillars",permalink:"/aws/docs/notes_fp"}},l=[{value:"Contents",id:"contents",children:[]},{value:"Operational Excellence",id:"operational-excellence",children:[{value:"Design Principles",id:"design-principles",children:[]},{value:"Best Practices",id:"best-practices",children:[]}]},{value:"Security",id:"security",children:[{value:"Design Principles",id:"design-principles-1",children:[]},{value:"Best Practices",id:"best-practices-1",children:[]}]},{value:"Reliability",id:"reliability",children:[{value:"Design Principles",id:"design-principles-2",children:[]},{value:"Best Practices",id:"best-practices-2",children:[]}]},{value:"Performance Efficiency",id:"performance-efficiency",children:[{value:"Design Principles",id:"design-principles-3",children:[]},{value:"Best Practices",id:"best-practices-3",children:[]}]},{value:"Cost Optimization",id:"cost-optimization",children:[{value:"Design Principles",id:"design-principles-4",children:[]},{value:"Best Practices",id:"best-practices-4",children:[]}]},{value:"Route53",id:"route53",children:[]},{value:"S3",id:"s3",children:[]},{value:"RDS, Redshift and ElastiCache",id:"rds-redshift-and-elasticache",children:[]},{value:"EC2 and EBS",id:"ec2-and-ebs",children:[]},{value:"EFS",id:"efs",children:[]},{value:"ELB and Autoscaling",id:"elb-and-autoscaling",children:[]},{value:"SQS",id:"sqs",children:[]},{value:"SNS",id:"sns",children:[]},{value:"API Gateway",id:"api-gateway",children:[]},{value:"Lambda",id:"lambda",children:[]},{value:"VPC",id:"vpc",children:[]},{value:"DynamoDB",id:"dynamodb",children:[]},{value:"ECS",id:"ecs",children:[]},{value:"Elastic Beanstalk",id:"elastic-beanstalk",children:[]},{value:"Storage Gateway",id:"storage-gateway",children:[]},{value:"IAM, Cognito and Directory Services",id:"iam-cognito-and-directory-services",children:[]},{value:"KMS and CloudHSM",id:"kms-and-cloudhsm",children:[]},{value:"Kinesis",id:"kinesis",children:[]},{value:"EMR",id:"emr",children:[]},{value:"Misc",id:"misc",children:[]}],i={rightToc:l};function s(e){var t=e.components,a=Object(r.a)(e,["components"]);return Object(o.b)("wrapper",Object(n.a)({},i,a,{components:t,mdxType:"MDXLayout"}),Object(o.b)("h2",{id:"contents"},"Contents"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(n.a)({parentName:"li"},{href:"#well-architected-framework"}),"Well-Architected Framework")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(n.a)({parentName:"li"},{href:"#route53"}),"Route 53")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(n.a)({parentName:"li"},{href:"#s3"}),"S3")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(n.a)({parentName:"li"},{href:"##rds-redshift-and-elasticache"}),"RDS, Redshift and ElastiCache")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(n.a)({parentName:"li"},{href:"#ec2-and-ebs"}),"EBS")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(n.a)({parentName:"li"},{href:"#efs"}),"EFS")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(n.a)({parentName:"li"},{href:"#elb-and-autoscaling"}),"ELB and Autoscaling")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(n.a)({parentName:"li"},{href:"#sqs"}),"SQS")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(n.a)({parentName:"li"},{href:"#sns"}),"SNS")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(n.a)({parentName:"li"},{href:"#api-gateway"}),"API Gateway")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(n.a)({parentName:"li"},{href:"#lambda"}),"Lambda")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(n.a)({parentName:"li"},{href:"#vpc"}),"VPC")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(n.a)({parentName:"li"},{href:"#dynamodb"}),"DynamoDB")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(n.a)({parentName:"li"},{href:"#ecs"}),"ECS")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(n.a)({parentName:"li"},{href:"#elastic-beanstalk"}),"Elastic Beanstalk")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(n.a)({parentName:"li"},{href:"#storage-gateway"}),"Storage Gateway")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(n.a)({parentName:"li"},{href:"#iam-cognito-and-directory-services"}),"IAM, Cognito and Directory Services")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(n.a)({parentName:"li"},{href:"#kms-and-cloudhsm"}),"KMS and CloudHSM")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(n.a)({parentName:"li"},{href:"#kinesis"}),"Kinesis")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(n.a)({parentName:"li"},{href:"#emr"}),"EMR")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(n.a)({parentName:"li"},{href:"#misc"}),"Misc"))),Object(o.b)("h1",{id:"well-architected-framework"},"Well-Architected Framework"),Object(o.b)("p",null,"The five pillars are \u2014"),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},"Operational Excellence "),Object(o.b)("li",{parentName:"ol"},"Security"),Object(o.b)("li",{parentName:"ol"},"Reliability"),Object(o.b)("li",{parentName:"ol"},"Performance Efficiency"),Object(o.b)("li",{parentName:"ol"},"Cost Optimization")),Object(o.b)("h2",{id:"operational-excellence"},"Operational Excellence"),Object(o.b)("h3",{id:"design-principles"},"Design Principles"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Perform operations as code"),Object(o.b)("li",{parentName:"ul"},"Annotate documents"),Object(o.b)("li",{parentName:"ul"},"Make frequent, small, reversible changes"),Object(o.b)("li",{parentName:"ul"},"Refine operations procedures frequently"),Object(o.b)("li",{parentName:"ul"},"Anticipate failure"),Object(o.b)("li",{parentName:"ul"},"Learn from all operational failures")),Object(o.b)("h3",{id:"best-practices"},"Best Practices"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Prepare"),Object(o.b)("li",{parentName:"ul"},"Operate"),Object(o.b)("li",{parentName:"ul"},"Evolve")),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Key AWS Service")," \u2014 AWS CloudFormation."),Object(o.b)("h2",{id:"security"},"Security"),Object(o.b)("h3",{id:"design-principles-1"},"Design Principles"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Implement a strong identity foundations"),Object(o.b)("li",{parentName:"ul"},"Enable traceability"),Object(o.b)("li",{parentName:"ul"},"Apply security at all layers"),Object(o.b)("li",{parentName:"ul"},"Automate security best practices"),Object(o.b)("li",{parentName:"ul"},"Protect data in transit and at rest"),Object(o.b)("li",{parentName:"ul"},"Keep people away from data"),Object(o.b)("li",{parentName:"ul"},"Prepare for security events")),Object(o.b)("h3",{id:"best-practices-1"},"Best Practices"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Identity and Access Management"),Object(o.b)("li",{parentName:"ul"},"Detective Controls"),Object(o.b)("li",{parentName:"ul"},"Infrastructure Protection"),Object(o.b)("li",{parentName:"ul"},"Data Protection"),Object(o.b)("li",{parentName:"ul"},"Incident Response")),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Key AWS Service")," \u2014 AWS Identity and Access Management (IAM)."),Object(o.b)("h2",{id:"reliability"},"Reliability"),Object(o.b)("h3",{id:"design-principles-2"},"Design Principles"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Test recovery procedures"),Object(o.b)("li",{parentName:"ul"},"Automatically recover from failure"),Object(o.b)("li",{parentName:"ul"},"Scale horizontally to increase aggregate system availability "),Object(o.b)("li",{parentName:"ul"},"Stop guessing capacity"),Object(o.b)("li",{parentName:"ul"},"Manage change in automation")),Object(o.b)("h3",{id:"best-practices-2"},"Best Practices"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Foundations"),Object(o.b)("li",{parentName:"ul"},"Change Management"),Object(o.b)("li",{parentName:"ul"},"Failure Management")),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Key AWS Service")," \u2014 Amazon CloudWatch."),Object(o.b)("h2",{id:"performance-efficiency"},"Performance Efficiency"),Object(o.b)("h3",{id:"design-principles-3"},"Design Principles"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Democratize advanced technologies"),Object(o.b)("li",{parentName:"ul"},"Go global in minutes"),Object(o.b)("li",{parentName:"ul"},"Use serverless architecture"),Object(o.b)("li",{parentName:"ul"},"Experiment more often"),Object(o.b)("li",{parentName:"ul"},"Mechanical sympathy")),Object(o.b)("h3",{id:"best-practices-3"},"Best Practices"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Selection",Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},"Compute"),Object(o.b)("li",{parentName:"ul"},"Storage"),Object(o.b)("li",{parentName:"ul"},"Database"),Object(o.b)("li",{parentName:"ul"},"Network"))),Object(o.b)("li",{parentName:"ul"},"Review"),Object(o.b)("li",{parentName:"ul"},"Monitoring"),Object(o.b)("li",{parentName:"ul"},"Tradeoffs")),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Key AWS Service")," \u2014 Amazon CloudWatch."),Object(o.b)("h2",{id:"cost-optimization"},"Cost Optimization"),Object(o.b)("h3",{id:"design-principles-4"},"Design Principles"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Adopt a consumption model"),Object(o.b)("li",{parentName:"ul"},"Measure overall efficiency"),Object(o.b)("li",{parentName:"ul"},"Stop spending money on data center operations"),Object(o.b)("li",{parentName:"ul"},"Analyze and attribute expenditure"),Object(o.b)("li",{parentName:"ul"},"Use managed and application level services to reduce cost of ownership")),Object(o.b)("h3",{id:"best-practices-4"},"Best Practices"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Expenditure Awareness"),Object(o.b)("li",{parentName:"ul"},"Cost-Effective Resources"),Object(o.b)("li",{parentName:"ul"},"Matching Supply and Demand"),Object(o.b)("li",{parentName:"ul"},"Optimizing Over Time")),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Key AWS Service")," \u2014 Cost Explorer."),Object(o.b)("h2",{id:"route53"},"Route53"),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Main functions of Route53")," \u2014"),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},"Register domain names."),Object(o.b)("li",{parentName:"ol"},"Route internet traffic to the resources for your domain."),Object(o.b)("li",{parentName:"ol"},"Check the health of your resources.")),Object(o.b)("p",null,"It's not used to ",Object(o.b)("em",{parentName:"p"},"distribute")," traffic."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"CNAME vs ALIAS")," \u2014  "),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"For routing to S3 bucket // Elastic load balancer use A record with ALIAS.  "),Object(o.b)("li",{parentName:"ul"},"For routing to RDS instance use CNAME with NO ALIAS // without ALIAS.")),Object(o.b)("p",null,"ALIAS only supports the following services \u2014"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"API Gateway"),Object(o.b)("li",{parentName:"ul"},"VPC interface endpoint"),Object(o.b)("li",{parentName:"ul"},"CloudFront distribution"),Object(o.b)("li",{parentName:"ul"},"Elastic Beanstalk environment"),Object(o.b)("li",{parentName:"ul"},"ELB load balancer"),Object(o.b)("li",{parentName:"ul"},"S3 bucket that is configured as a static website"),Object(o.b)("li",{parentName:"ul"},"Another Route 53 record in the same hosted zone")),Object(o.b)("p",null,"Route53 does not directly log to S3 bucket, we can forward that from Cloudwatch, but can't do it directly."),Object(o.b)("p",null,"Types of ",Object(o.b)("strong",{parentName:"p"},"Route53 health checks")," \u2014"),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},"Health checks that monitor ",Object(o.b)("strong",{parentName:"li"},"an endpoint"),". This ",Object(o.b)("strong",{parentName:"li"},"can be on-premise")," too."),Object(o.b)("li",{parentName:"ol"},"Health checks that monitor ",Object(o.b)("strong",{parentName:"li"},"other health checks"),"."),Object(o.b)("li",{parentName:"ol"},"Health checks that monitor ",Object(o.b)("strong",{parentName:"li"},"Cloudwatch alarms"),". ")),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Multivalue answer routing policy")," responds with upto 8 healthy records selected at ",Object(o.b)("strong",{parentName:"p"},"random"),"."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Weighted routing policy")," is a good fit for ",Object(o.b)("strong",{parentName:"p"},"blue-green deployments"),"."),Object(o.b)("h2",{id:"s3"},"S3"),Object(o.b)("p",null,"In a newly created S3 bucket, everything // every additional option is turned off by default. Also, no bucket policy exists."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"S3 bucket properties")," are \u2014"),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},"Versioning"),Object(o.b)("li",{parentName:"ol"},"Server access logging"),Object(o.b)("li",{parentName:"ol"},"Static website hosting"),Object(o.b)("li",{parentName:"ol"},"Object level logging // Essentially CloudTrail"),Object(o.b)("li",{parentName:"ol"},"Transfer acceleration"),Object(o.b)("li",{parentName:"ol"},"Events")),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Object level properties"),"\u2014",Object(o.b)("br",{parentName:"p"}),"\n","Metadata and Storage class are object level properties. All object level properties are"),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},"Storage class"),Object(o.b)("li",{parentName:"ol"},"Encryption"),Object(o.b)("li",{parentName:"ol"},"Metadata"),Object(o.b)("li",{parentName:"ol"},"Tags"),Object(o.b)("li",{parentName:"ol"},"Object lock")),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"DELETE operation")," does not keep a copy unless you have versioning enabled. From the docs"),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"},"The DELETE operation removes the null version (if there is one) of an object and inserts a delete marker, which becomes the current version of the object. If there isn't a null version, Amazon S3 does not remove any objects. ")),Object(o.b)("p",null,"S3 is a ",Object(o.b)("strong",{parentName:"p"},"managed service"),". It can't be part of a VPC."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"S3 object metadata"),"\u2014"),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},"System metadata"),Object(o.b)("li",{parentName:"ol"},"User-defined metadata")),Object(o.b)("p",null,"User defined metadatas must start with ",Object(o.b)("inlineCode",{parentName:"p"},"x-amz-meta"),"."),Object(o.b)("p",null,"When you enable logging on a bucket, the console both enables logging on the source bucket and adds a grant in the target bucket's access control list (ACL) granting write permission to the Log Delivery Group."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"S3 bucket endpoints formats")," \u2014"),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},Object(o.b)("a",Object(n.a)({parentName:"li"},{href:"http://bucket.s3.amazonaws.com"}),"http://bucket.s3.amazonaws.com")),Object(o.b)("li",{parentName:"ol"},Object(o.b)("a",Object(n.a)({parentName:"li"},{href:"http://bucket.s3.aws-region.amazonaws.com"}),"http://bucket.s3.aws-region.amazonaws.com")),Object(o.b)("li",{parentName:"ol"},Object(o.b)("a",Object(n.a)({parentName:"li"},{href:"http://bucket.s3-aws-region.amazonaws.com"}),"http://bucket.s3-aws-region.amazonaws.com")),Object(o.b)("li",{parentName:"ol"},Object(o.b)("a",Object(n.a)({parentName:"li"},{href:"http://s3.amazonaws.com/bucket"}),"http://s3.amazonaws.com/bucket")),Object(o.b)("li",{parentName:"ol"},Object(o.b)("a",Object(n.a)({parentName:"li"},{href:"http://s3.aws-region.amazonaws.com/bucket"}),"http://s3.aws-region.amazonaws.com/bucket")),Object(o.b)("li",{parentName:"ol"},Object(o.b)("a",Object(n.a)({parentName:"li"},{href:"http://s3-aws-region.amazonaws.com/bucket"}),"http://s3-aws-region.amazonaws.com/bucket"))),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Update")," \u2014 AWS will stop supporting the URL path format for buckets created after September 30, 2020. Read ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"https://aws.amazon.com/blogs/aws/amazon-s3-path-deprecation-plan-the-rest-of-the-story/"}),"this")," for details."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Object sizes")," \u2014\nS3 can store objects of size 0 bytes to 5 TB.\nA single PUT can transfer 5 GB max. For files larger than 100MB, multipart upload is recommended."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Cross-region replication")," requires that versioning be enabled on both the source bucket and the destination bucket."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"AWS Glacier archive retrieval")," options \u2014"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Expedited: Costly, 1-5 minutes."),Object(o.b)("li",{parentName:"ul"},"Standard: Default, 3-5 hours."),Object(o.b)("li",{parentName:"ul"},"Bulk: Cheapest, 5-12 hours.")),Object(o.b)("p",null,"To increase performance, we can ",Object(o.b)("strong",{parentName:"p"},"prefix each object name with a hash key")," along with the current date. But, according to the new S3 performance announcement, this is ",Object(o.b)("strong",{parentName:"p"},"not needed anymore"),"."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Increasing performance in S3")," \u2014"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"If workload is mainly GET requests, integrate Cloudfront with S3."),Object(o.b)("li",{parentName:"ul"},"If workload consists of PUT requests, use S3 transfer acceleration.")),Object(o.b)("p",null,"In the ",Object(o.b)("strong",{parentName:"p"},"CORS")," configuration, the ",Object(o.b)("strong",{parentName:"p"},"exact URLs")," must be added, with the correct protocol, i.e. ",Object(o.b)("strong",{parentName:"p"},"http vs https"),"."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"S3")," does not support ",Object(o.b)("inlineCode",{parentName:"p"},"OPTIONS"),", ",Object(o.b)("inlineCode",{parentName:"p"},"CONNECT")," and ",Object(o.b)("inlineCode",{parentName:"p"},"TRACE")," ",Object(o.b)("strong",{parentName:"p"},"methods"),". "),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"S3 encryptions")," \u2014"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"SSE-S3: Data and master keys managed by S3."),Object(o.b)("li",{parentName:"ul"},"SSE-C: The user manages the encryption keys."),Object(o.b)("li",{parentName:"ul"},"SSE-KMS: AWS manages the data key, the user manages the master key.")),Object(o.b)("p",null,"To make sure that S3 objects are only accessible from Cloudfront, create an ",Object(o.b)("strong",{parentName:"p"},"Origin Access Identity (OAI) for Cloudfront")," and grant access to the objects to that OAI."),Object(o.b)("p",null,"We can create ",Object(o.b)("strong",{parentName:"p"},"event notification in S3")," to ",Object(o.b)("strong",{parentName:"p"},"invoke lambda")," function."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Customer managed S3 encryption workflow")," \u2014",Object(o.b)("br",{parentName:"p"}),"\n","Generate a data key using Customer managed CMK. Encrypt data using data key and delete data key. Store encrypted data key and data in S3 buckets. For decryption, use CMK to decrypt data key into plain text and then decrypt data using plain text data key."),Object(o.b)("p",null,"AWS S3 ",Object(o.b)("strong",{parentName:"p"},"performance")," \u2014"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"3,500 requests per second to add data"),Object(o.b)("li",{parentName:"ul"},"5,500 requests per second to retrieve data")),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Provisioned capacity")," should be used when we want to guarantee the availability of fast expedited retrieval from S3 Glacier within minutes."),Object(o.b)("p",null,"For ",Object(o.b)("strong",{parentName:"p"},"S3 static website hosting"),", the default provided ",Object(o.b)("strong",{parentName:"p"},"URL")," is ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"https://bucket-name.s3-website-aws-region.amazonaws.com"}),"https://bucket-name.s3-website-aws-region.amazonaws.com"),"."),Object(o.b)("p",null,"S3 server side encryption uses ",Object(o.b)("strong",{parentName:"p"},"AES 256"),"."),Object(o.b)("p",null,"S3 ",Object(o.b)("strong",{parentName:"p"},"event notification targets")," \u2014"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"SQS"),Object(o.b)("li",{parentName:"ul"},"SNS"),Object(o.b)("li",{parentName:"ul"},"Lambda")),Object(o.b)("p",null,"An 80 TB ",Object(o.b)("strong",{parentName:"p"},"Snowball")," appliance and 100 TB Snowball Edge appliance only have 72 TB and 83 TB of ",Object(o.b)("strong",{parentName:"p"},"usable capacity")," respectively. "),Object(o.b)("p",null,"For ",Object(o.b)("strong",{parentName:"p"},"static website hosting")," with S3, the name of the bucket must be the same as the domain or subdomain name."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Preventing accidental deletion")," of S3 objects \u2014"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Enable versioning"),Object(o.b)("li",{parentName:"ul"},"Enable MFA delete")),Object(o.b)("h2",{id:"rds-redshift-and-elasticache"},"RDS, Redshift and ElastiCache"),Object(o.b)("p",null,"Amazon ",Object(o.b)("strong",{parentName:"p"},"Redshift Enhanced VPC Routing")," provides VPC resources the access to Redshift."),Object(o.b)("p",null,"Amazon ",Object(o.b)("strong",{parentName:"p"},"ElastiCache")," offers fully managed ",Object(o.b)("strong",{parentName:"p"},"Redis and Memcached"),". "),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Cross-region replication")," can be setup for ",Object(o.b)("strong",{parentName:"p"},"Redshift Clusters"),"."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Redshift encryption")," \u2014"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Using AWS KMS to encrypt the underlying data."),Object(o.b)("li",{parentName:"ul"},"Using S3 and its encryption.")),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"RDS data size limits")," \u2014"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Aurora: 64 TB"),Object(o.b)("li",{parentName:"ul"},"Others: 16 TB.")),Object(o.b)("p",null,"During automated backup, Amazon RDS performs a storage volume snapshot of entire Database instance. Also, it captures transaction logs every 5 minutes."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"AWS RDS is a service")," whereas ",Object(o.b)("strong",{parentName:"p"},"AWS Aurora is a database engine"),"."),Object(o.b)("p",null,"For ",Object(o.b)("strong",{parentName:"p"},"Redshift"),", spot instances are not an option."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Encryption of RDS")," \u2014 Have to enable it on database creation. Also, not all instance classes support encryption, we have to choose one which supports it."),Object(o.b)("p",null,"To enable ",Object(o.b)("strong",{parentName:"p"},"multi-region replication of RDS"),", we have to use ",Object(o.b)("strong",{parentName:"p"},"Read Replicas"),". Multi-AZ is not the solution here."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"RDS Read Replicas")," are ",Object(o.b)("strong",{parentName:"p"},"synced asynchronously"),", so it can have ",Object(o.b)("strong",{parentName:"p"},"replication lag"),"."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Redshift automated snapshot retention period")," \u2014 1 day to 35 days."),Object(o.b)("p",null,"We can't use auto-scaling with ",Object(o.b)("strong",{parentName:"p"},"RDS"),". To improve ",Object(o.b)("strong",{parentName:"p"},"performance"),", we should look to ",Object(o.b)("strong",{parentName:"p"},"sharding")," instead. Starting from ",Object(o.b)("strong",{parentName:"p"},"June 20"),", we ",Object(o.b)("strong",{parentName:"p"},"can use auto-scaling")," with RDS instances."),Object(o.b)("p",null,"We configure ",Object(o.b)("strong",{parentName:"p"},"RDS engine configurations")," using ",Object(o.b)("strong",{parentName:"p"},"parameter groups"),"."),Object(o.b)("p",null,"To use ",Object(o.b)("strong",{parentName:"p"},"REDIS AUTH with ElastiCache"),", ",Object(o.b)("strong",{parentName:"p"},"in-transit encryption")," must be enabled for clusters."),Object(o.b)("p",null,"For RDS, ",Object(o.b)("strong",{parentName:"p"},"Enhanced Monitoring")," gathers its metrics from an ",Object(o.b)("strong",{parentName:"p"},"agent on the instance"),"."),Object(o.b)("p",null,"In case of a ",Object(o.b)("strong",{parentName:"p"},"failover"),", Amazon RDS flips the canonical name record (",Object(o.b)("strong",{parentName:"p"},"CNAME"),") for your DB instance to point at the standby."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Aurora endpoints"),", by default \u2014 "),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"A reader endpoint. It load balances all read traffic between instances."),Object(o.b)("li",{parentName:"ul"},"A cluster endpoint. For write operations.")),Object(o.b)("p",null,"We can create ",Object(o.b)("strong",{parentName:"p"},"additional custom endpoints")," that load balance based on specified criteria."),Object(o.b)("p",null,"With ",Object(o.b)("strong",{parentName:"p"},"Redshift Spectrum"),", we can run complex queries on ",Object(o.b)("strong",{parentName:"p"},"data stored in S3"),"."),Object(o.b)("p",null,"We can use ",Object(o.b)("strong",{parentName:"p"},"WLM in the parameter group configuration")," of Redshift to define number of query queues and how queries are routed to those queues."),Object(o.b)("p",null,"The memory and processor ",Object(o.b)("strong",{parentName:"p"},"usage by each process")," in an RDS instance can not be monitored by Cloudwatch, we have to use ",Object(o.b)("strong",{parentName:"p"},"RDS Enhanced Monitoring")," for that. Because Cloudwatch monitors the hypervisor, not the individual instances."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"IAM DB authentication")," can be used with ",Object(o.b)("strong",{parentName:"p"},"MySQL and PostgreSQL"),". With this, you don't need to use a password when you connect to a DB instance. Instead, you use an ",Object(o.b)("strong",{parentName:"p"},"authentication token"),"."),Object(o.b)("h2",{id:"ec2-and-ebs"},"EC2 and EBS"),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Instance store")," \u2014\nYou cannot add instance store volume to an instance after it's launched.\nNot all EC2 instance types support instance store volume."),Object(o.b)("p",null,"Persistence \u2014 Instance store persists during reboots, but not stop or terminate. EBS volumes however persists accross reboot, stop, and terminate."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"EBS volume types")," \u2014"),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},"General purpose SSD. For web applications // most use cases."),Object(o.b)("li",{parentName:"ol"},"Provisioned IOPS SSD. For critical high performing databases."),Object(o.b)("li",{parentName:"ol"},"Throughput optimized HDD. For Big Data."),Object(o.b)("li",{parentName:"ol"},"Cold HDD. For infrequently accessed data.")),Object(o.b)("p",null,"Also, to note, ",Object(o.b)("strong",{parentName:"p"},"HDDs cannot be boot volumes"),"."),Object(o.b)("p",null,"We can use Amazon ",Object(o.b)("strong",{parentName:"p"},"Data Lifecycle Manager")," to automate taking backups // snapshots of EBS volumes, and protect them from accidental or unwanted deletion."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"EBS-optimized EC2 instances")," provide additional, dedicated capacity for EBS IO. Helps squeeze out the last ounce of performance."),Object(o.b)("p",null,"Encrypted EBS volumes are not supported on all instance types."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"To get more performance out of EBS volumes")," \u2014"),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},"Use a more modern Linux Kernel."),Object(o.b)("li",{parentName:"ol"},"Use RAID 0.")),Object(o.b)("p",null,"VolumeRemainingSize is not an Cloudwatch metric for EBS volumes."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"EBS volume types")," \u2014"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"For throughput, Throughput optimized HDD."),Object(o.b)("li",{parentName:"ul"},"For large number of transaction, i.e. IOPS, Provisioned IOPS SSD.")),Object(o.b)("p",null,"By default, ",Object(o.b)("strong",{parentName:"p"},"EBS volumes are automatically replicated within their availability zone"),", and offers a significant high availability."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"AWS Cloudwatch Logs")," can be used to ",Object(o.b)("strong",{parentName:"p"},"monitor and store")," logs from EC2 instances. The instance needs ",Object(o.b)("strong",{parentName:"p"},"awslogs log driver")," installed to be able to send logs to CloudWatch. We don't need any database or S3 for storage."),Object(o.b)("p",null,"Cloudwatch logs agent is ",Object(o.b)("strong",{parentName:"p"},"more efficient")," than AWS SSM Agent."),Object(o.b)("p",null,"With ",Object(o.b)("strong",{parentName:"p"},"EC2 dedicated hosts")," we have control over ",Object(o.b)("strong",{parentName:"p"},"number of cores"),", not anywhere else."),Object(o.b)("p",null,"Placement groups \u2014"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Cluster"),Object(o.b)("li",{parentName:"ul"},"Spread. Maximum number of instances in an AZ is 7."),Object(o.b)("li",{parentName:"ul"},"Partitioned")),Object(o.b)("p",null,"The ",Object(o.b)("strong",{parentName:"p"},"console does not support placement groups"),", have to do it from CLI."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Cluster Placement groups")," have very ",Object(o.b)("strong",{parentName:"p"},"low inter-note latency"),"."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Hibernation of EC2 instances")," \u2014"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"When EC2 instance is hibernated and brought back up, the public IP4 address is renewed. All the other IP addresses are retained."),Object(o.b)("li",{parentName:"ul"},"When EC2 instance is in hibernate, you are only charged for elastic IP address and EBS storage space.")),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Default Cloudwatch metrics")," \u2014"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"CPU utilization"),Object(o.b)("li",{parentName:"ul"},"Disk reads and writes"),Object(o.b)("li",{parentName:"ul"},"Network in and out")),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Custom metrics")," \u2014"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Memory utilization"),Object(o.b)("li",{parentName:"ul"},"Disk swap utilization"),Object(o.b)("li",{parentName:"ul"},"Disk space utilization"),Object(o.b)("li",{parentName:"ul"},"Page file utilization"),Object(o.b)("li",{parentName:"ul"},"Log collection")),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Reserved Instances that are terminated")," are ",Object(o.b)("strong",{parentName:"p"},"still billed")," until the end of their term according to their payment option."),Object(o.b)("p",null,"Upon ",Object(o.b)("strong",{parentName:"p"},"stopping and starting an EC2 instance")," \u2014"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Elastic IP address is disassociated from the instance if it is an EC2-Classic instance. Otherwise, if it is an EC2-VPC instance, the Elastic IP address remains associated."),Object(o.b)("li",{parentName:"ul"},"The underlying physical host is possibly changed.")),Object(o.b)("p",null,"EBS is ",Object(o.b)("strong",{parentName:"p"},"lower-latency")," than EFS."),Object(o.b)("p",null,"The maximum ratio of ",Object(o.b)("strong",{parentName:"p"},"provisioned IOPS")," to requested volume size (in GiB) is 50:1."),Object(o.b)("p",null,"For ",Object(o.b)("strong",{parentName:"p"},"new accounts"),", Amazon has a ",Object(o.b)("strong",{parentName:"p"},"soft limit of 20 EC2 instances per region"),", which can be removed by contacting Amazon."),Object(o.b)("p",null,"You can attach a network interface (ENI) to an EC2 instance in the following ways \u2014"),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},"When it's running. Hot attach."),Object(o.b)("li",{parentName:"ol"},"When it's stopped. Warm attach."),Object(o.b)("li",{parentName:"ol"},"When the instance is being launched. Cold attach.")),Object(o.b)("p",null,"EBS snapshots are more efficient and cost-effective solution compared to ",Object(o.b)("strong",{parentName:"p"},"disk mirroring using RAID1"),"."),Object(o.b)("p",null,"EBS volumes can only be attached to an EC2 instance in the ",Object(o.b)("strong",{parentName:"p"},"same Availability Zone"),"."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"EBS snapshot creation")," \u2014 In usual scenarios EBS volume snapshots can be created at the same time it's in usage. But when using RAID configurations, there are additional complexities and we should stop every IO operation and flush the cache before taking a snapshot."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Cloudwatch alarm actions")," can automatically start, stop or reboot EC2 instances based on alarms."),Object(o.b)("p",null,"With ",Object(o.b)("strong",{parentName:"p"},"scheduled reserved instances"),", we can plan out our future usage and get reserved instances in those planned time-frame only."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Throughput optimized HDD vs Cold HDD")," \u2014 Throughput optimized is used for frequently accessed data, whereas Cold HDD is used for infrequently accessed data. Also the later is more cost-effective."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"RAID0 vs RAID1")," \u2014"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"RAID1 is used for mirroring, high-availability and redundancy."),Object(o.b)("li",{parentName:"ul"},"RAID0 is used for higher performance, it can combine multiple disk drives together.")),Object(o.b)("p",null,"Larger EC2 instances have higher disk data throughput. This can be used in conjunction with RAID 0 to ",Object(o.b)("strong",{parentName:"p"},"improve EBS performance"),"."),Object(o.b)("h2",{id:"efs"},"EFS"),Object(o.b)("p",null,"EFS supports cross availability zone mounting, but it is not recommended. The recommended approach is ",Object(o.b)("strong",{parentName:"p"},"creating a mount point in each availability zone"),"."),Object(o.b)("p",null,"You can mount an EFS file system in only one VPC at a time. If you want to access it or mount it from another VPC, you have to create a ",Object(o.b)("strong",{parentName:"p"},"VPC peering connection"),". You should note that all of these must be within the same region."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"NFS port 2049")," for EFS."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Encryption")),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},"Encryption at rest must be specified at the creation of file system. If you want to modify it later on, create a new EFS file system with encryption enabled and copy the data over."),Object(o.b)("li",{parentName:"ol"},"Encryption at transit is supported by EFS // NFS, and must be enabled from the client side. It simply uses SSL to encrypt the connection.")),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Performance mode")),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},"General purpose must be used for most purposes, it has low latency, so ideal for web applications."),Object(o.b)("li",{parentName:"ol"},"Max IO is ideal for big data and parallel connection and processing from a large number of hosts. It has higher latency but large throughput.")),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Throughput mode")),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},"Bursting is ideal for arbitrary large amount of data, because it scales properly."),Object(o.b)("li",{parentName:"ol"},"But for cases with high throughput to storage ratio, such as common in web applications, provisioned mode is better.")),Object(o.b)("h2",{id:"elb-and-autoscaling"},"ELB and Autoscaling"),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Patching an AMI for an auto scaling group"),", the procedure is \u2014  "),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},"Create an image out of the main patched EC2 instance"),Object(o.b)("li",{parentName:"ol"},"Create a new launch configuration with new AMI ID"),Object(o.b)("li",{parentName:"ol"},"Update auto scaling group with new launch configuration ID. ")),Object(o.b)("p",null,"Note that AMI ID is set during creation of launch configuration and cannot be modified, so we have to create a new launch configuration."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Default metric types for a load balancer")," \u2014"),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},"Request count per target."),Object(o.b)("li",{parentName:"ol"},"Average CPU utilization."),Object(o.b)("li",{parentName:"ol"},"Network in."),Object(o.b)("li",{parentName:"ol"},"Network out.")),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Monitoring Application Load Balancers")," \u2014"),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},"Cloudwatch metrics"),Object(o.b)("li",{parentName:"ol"},"Access logs"),Object(o.b)("li",{parentName:"ol"},"Request tracing"),Object(o.b)("li",{parentName:"ol"},"Cloudtrail logs.")),Object(o.b)("p",null,"Adding ",Object(o.b)("strong",{parentName:"p"},"lifecycle hooks")," to ASGs put instances in ",Object(o.b)("strong",{parentName:"p"},"wait state")," before termination. During this wait state, we can perform custom activities. Default wait period is 1 hour."),Object(o.b)("p",null,"ASG ",Object(o.b)("strong",{parentName:"p"},"Dynamic Scaling Policies")," \u2014"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Target tracking scaling. The ",Object(o.b)("strong",{parentName:"li"},"preferred")," one to use, this should be the first one we should consider."),Object(o.b)("li",{parentName:"ul"},"Step scaling"),Object(o.b)("li",{parentName:"ul"},"Simple scaling")),Object(o.b)("p",null,"If you are scaling based on a utilization metric that increases or decreases proportionally to the number of instances in an Auto Scaling group, we recommend that you use target tracking scaling policies. Otherwise, we recommend that you use step scaling policies. "),Object(o.b)("p",null,"The ELB service does not consume an IP address, it's the nodes that consume one IP address each."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Auto-scaling")," ensures \u2014"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Fault tolerance"),Object(o.b)("li",{parentName:"ul"},"Availability")),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"ELBs")," can manage traffic within a region and not between regions."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"For unstable scaling behavior"),", that is scaling multiple times frequently, the following things can be done \u2014"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Increasing ",Object(o.b)("strong",{parentName:"li"},"auto-scaling cooldown timer")," value would give scaling activity sufficient time to stabilize."),Object(o.b)("li",{parentName:"ul"},"Modify the ",Object(o.b)("strong",{parentName:"li"},"cloudwatch alarm period")," that triggers scaling activity.")),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Default cooldown period")," is 300 seconds."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Port based routing")," is supported by ",Object(o.b)("strong",{parentName:"p"},"Application Load Balancer"),"."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Network Load Balancer")," can be used to ",Object(o.b)("strong",{parentName:"p"},"terminate TLS connections"),". For this, NLB uses a security policy which consists of protocols and ciphers. The certificate used can be provided by ",Object(o.b)("strong",{parentName:"p"},"AWS Certificate Manager"),"."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Connection draining")," enables the load balancer to complete in-flight requests made to instances that are de-registering or unhealthy. "),Object(o.b)("p",null,"ASG termination policy \u2014"),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},"Oldest launch configuration."),Object(o.b)("li",{parentName:"ol"},"Closest to next billing hour."),Object(o.b)("li",{parentName:"ol"},"Random.")),Object(o.b)("p",null,"Load balancer does not create or terminate instances, that's done by auto scaling group."),Object(o.b)("h2",{id:"sqs"},"SQS"),Object(o.b)("p",null,"Consumers must ",Object(o.b)("strong",{parentName:"p"},"delete an SQS message")," manually after it has done processing the message. To delete a message, use the ReceiptHandle of a message, not the MessageId."),Object(o.b)("p",null,"Incoming messages can ",Object(o.b)("strong",{parentName:"p"},"trigger a lambda function"),"."),Object(o.b)("p",null,"We can use ",Object(o.b)("strong",{parentName:"p"},"dead letter queues")," to isolate messages that can't be processed right now."),Object(o.b)("p",null,"SQS does not ",Object(o.b)("strong",{parentName:"p"},"encrypt")," messages by default."),Object(o.b)("p",null,"Default ",Object(o.b)("strong",{parentName:"p"},"visibility timeout")," for SQS is ",Object(o.b)("strong",{parentName:"p"},"30 seconds"),"."),Object(o.b)("p",null,"Each ",Object(o.b)("strong",{parentName:"p"},"FIFO Queue")," uses \u2014"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Message Deduplication ID "),Object(o.b)("li",{parentName:"ul"},"Message Group ID. Message Group ID helps preserve order.")),Object(o.b)("p",null,"For application with identical message bodies, use unique deduplication ID, while for unique message bodies, use content-based deduplication ID."),Object(o.b)("p",null,"Both the default and maximum batch size for ",Object(o.b)("inlineCode",{parentName:"p"},"ReceiveMessage")," call of SQS is 10."),Object(o.b)("p",null,"Reducing SQS API calls \u2014"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Use long polling."),Object(o.b)("li",{parentName:"ul"},"Send ",Object(o.b)("inlineCode",{parentName:"li"},"DeleteMessage")," requests in batch using ",Object(o.b)("inlineCode",{parentName:"li"},"DeleteMessageBatch"),". Other batch actions are SendMessageBatch and ",Object(o.b)("inlineCode",{parentName:"li"},"ChangeMessageVisibilityBatch"),". ")),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Message retention period")," in SQS \u2014 1 minute to 14 days. The default is 4 days."),Object(o.b)("p",null,"Limit on number of ",Object(o.b)("strong",{parentName:"p"},"inflight messages")," \u2014 120,000 for standard queue and 20,000 for FIFO queue."),Object(o.b)("h2",{id:"sns"},"SNS"),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Available protocols for AWS SNS")," \u2014"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"HTTP // HTTPS"),Object(o.b)("li",{parentName:"ul"},"Email"),Object(o.b)("li",{parentName:"ul"},"Email-JSON"),Object(o.b)("li",{parentName:"ul"},"SQS"),Object(o.b)("li",{parentName:"ul"},"Application"),Object(o.b)("li",{parentName:"ul"},"Lambda"),Object(o.b)("li",{parentName:"ul"},"SMS")),Object(o.b)("p",null,"We can add ",Object(o.b)("strong",{parentName:"p"},"filter policies")," to individual subscribers in an SNS topic."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"SNS message attributes")," are \u2014"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Name"),Object(o.b)("li",{parentName:"ul"},"Type"),Object(o.b)("li",{parentName:"ul"},"Value")),Object(o.b)("p",null,"With ",Object(o.b)("strong",{parentName:"p"},"Amazon SNS"),", there is a possibility of the client receiving ",Object(o.b)("strong",{parentName:"p"},"duplicate messages"),"."),Object(o.b)("h2",{id:"api-gateway"},"API Gateway"),Object(o.b)("p",null,"API Gateway can ",Object(o.b)("strong",{parentName:"p"},"integrate with any HTTP based operations")," available on the public internet, as well as other AWS services."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Integration types")," \u2014"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Lambda function, can be from ",Object(o.b)("strong",{parentName:"li"},"another AWS account")," as well."),Object(o.b)("li",{parentName:"ul"},"HTTP"),Object(o.b)("li",{parentName:"ul"},"Mock"),Object(o.b)("li",{parentName:"ul"},"AWS Service"),Object(o.b)("li",{parentName:"ul"},"VPC Link")),Object(o.b)("p",null,"For connecting API Gateway to a set of services hosted in an ",Object(o.b)("strong",{parentName:"p"},"on-premise network"),", we can use"),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},Object(o.b)("strong",{parentName:"li"},"DirectConnect")," to connect the private network to AWS directly."),Object(o.b)("li",{parentName:"ol"},"Then use ",Object(o.b)("strong",{parentName:"li"},"VPCLink")," to set up API Gateway connection.")),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"API Gateway Throttling")," \u2014"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("strong",{parentName:"li"},"Burst limit")," refers to the first millisecond."),Object(o.b)("li",{parentName:"ul"},Object(o.b)("strong",{parentName:"li"},"Steady-state limit")," refers to an one second interval.")),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Throttling behaviors")," \u2014"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"If an user exceeds the burst limit but not the steady-state limit, the rest of the requests are throttled over the one second steady-state interval. "),Object(o.b)("li",{parentName:"ul"},"If an user exceeds the steady-state limit, AWS returns ",Object(o.b)("inlineCode",{parentName:"li"},"429 Too Many Requests")," error.")),Object(o.b)("p",null,"When it comes to throttling settings, you can ",Object(o.b)("strong",{parentName:"p"},"override stage settings on an individual method")," within the stage. That is, there is an option for method level throttling to override stage level throttling."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Access control mechanisms")," for API Gateway \u2014"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Resource policies"),Object(o.b)("li",{parentName:"ul"},"AWS IAM roles and policies"),Object(o.b)("li",{parentName:"ul"},"CORS or Cross-origin resource sharing"),Object(o.b)("li",{parentName:"ul"},"Lambda authorizers"),Object(o.b)("li",{parentName:"ul"},"Amazon Cognito user pools"),Object(o.b)("li",{parentName:"ul"},"Client side SSL certs"),Object(o.b)("li",{parentName:"ul"},"Usage plans")),Object(o.b)("p",null,"API Gateway ",Object(o.b)("strong",{parentName:"p"},"automatically protects the backend systems from DDoS")," attack."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Cache properties and settings")," \u2014"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Cache status"),Object(o.b)("li",{parentName:"ul"},"Flush entire cache"),Object(o.b)("li",{parentName:"ul"},"Enable API cache"),Object(o.b)("li",{parentName:"ul"},"Cache capacity"),Object(o.b)("li",{parentName:"ul"},"Encrypt cache data"),Object(o.b)("li",{parentName:"ul"},"Cache TTL"),Object(o.b)("li",{parentName:"ul"},"Require authorization"),Object(o.b)("li",{parentName:"ul"},"Handle unauthorized requests")),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Monitoring")," API Gateway usage \u2014 we can use ",Object(o.b)("strong",{parentName:"p"},"CloudWatch")," or ",Object(o.b)("strong",{parentName:"p"},"Access logging"),". Access logging logs who accessed the API and how the caller accessed the API, CloudWatch does not include this data."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Protect backend systems")," behind API gateway from ",Object(o.b)("strong",{parentName:"p"},"traffic spikes")," \u2014"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Enable throttling."),Object(o.b)("li",{parentName:"ul"},"Enable result caching.")),Object(o.b)("h2",{id:"lambda"},"Lambda"),Object(o.b)("p",null,"Lambda functions ",Object(o.b)("strong",{parentName:"p"},"can be run within a private VPC"),"."),Object(o.b)("p",null,"Lambda can ",Object(o.b)("strong",{parentName:"p"},"read events from")," \u2014"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Amazon Kinesis"),Object(o.b)("li",{parentName:"ul"},"Amazon DynamoDB"),Object(o.b)("li",{parentName:"ul"},"Amazon Simple Queue Service")),Object(o.b)("p",null,"Services that can ",Object(o.b)("strong",{parentName:"p"},"invoke Lambda functions")," \u2014"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Elastic Load Balancing (Application Load Balancer)"),Object(o.b)("li",{parentName:"ul"},"Amazon Cognito"),Object(o.b)("li",{parentName:"ul"},"Amazon Lex"),Object(o.b)("li",{parentName:"ul"},"Amazon Alexa"),Object(o.b)("li",{parentName:"ul"},"Amazon API Gateway"),Object(o.b)("li",{parentName:"ul"},"Amazon CloudFront (Lambda@Edge)"),Object(o.b)("li",{parentName:"ul"},"Amazon Kinesis Data Firehose"),Object(o.b)("li",{parentName:"ul"},"Amazon Simple Storage Service"),Object(o.b)("li",{parentName:"ul"},"Amazon Simple Notification Service"),Object(o.b)("li",{parentName:"ul"},"Amazon Simple Email Service"),Object(o.b)("li",{parentName:"ul"},"AWS CloudFormation"),Object(o.b)("li",{parentName:"ul"},"Amazon CloudWatch Logs"),Object(o.b)("li",{parentName:"ul"},"Amazon CloudWatch Events"),Object(o.b)("li",{parentName:"ul"},"AWS CodeCommit"),Object(o.b)("li",{parentName:"ul"},"AWS Config")),Object(o.b)("p",null,"AWS ",Object(o.b)("strong",{parentName:"p"},"CodePipeline")," and AWS ",Object(o.b)("strong",{parentName:"p"},"OpsWorks can't invoke lambda")," functions."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"For failures")," we can configure lambda to send non-processed payloads to ",Object(o.b)("strong",{parentName:"p"},"SQS Dead letter queue"),". Then we can configure ",Object(o.b)("strong",{parentName:"p"},"SNS to send a notification")," if we want. Lambda ",Object(o.b)("strong",{parentName:"p"},"does not have an in-built mechanism")," for notification upon failure."),Object(o.b)("p",null,"A policy on a role defines which API actions can be made on the target, it does not define whether the source can access the target or not."),Object(o.b)("p",null,"Each lambda function has an ",Object(o.b)("strong",{parentName:"p"},"ephemeral storage of 512 MB")," in the ",Object(o.b)("inlineCode",{parentName:"p"},"tmp")," directory.  "),Object(o.b)("p",null,"AWS ",Object(o.b)("strong",{parentName:"p"},"CloudWatch rule")," can be configured to trigger a lambda function. While configuration, the following can be used as ",Object(o.b)("strong",{parentName:"p"},"input to the target lambda function")," \u2014"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Matched event"),Object(o.b)("li",{parentName:"ul"},"Part of the matched event"),Object(o.b)("li",{parentName:"ul"},"Constant (JSON text)")),Object(o.b)("p",null,"The following ",Object(o.b)("strong",{parentName:"p"},"CloudFront events can trigger lambda function")," \u2014"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Viewer request"),Object(o.b)("li",{parentName:"ul"},"Viewer response"),Object(o.b)("li",{parentName:"ul"},"Origin request"),Object(o.b)("li",{parentName:"ul"},"Origin response")),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Lambda function update has eventual consistency"),". Which means, for a brief window of less than a minute, it may execute either the old version or the new version."),Object(o.b)("p",null,"We can use ",Object(o.b)("strong",{parentName:"p"},"alias versions")," to point to another version. This can enable easier upgradation from the viewpoint of a consumer."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Limits")," \u2014"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Function memory allocation: 128 MB to 3008 MB, in 64 MB increments."),Object(o.b)("li",{parentName:"ul"},"Function timeout: 900 seconds."),Object(o.b)("li",{parentName:"ul"},"Deployment package: 50 MB * 5 layers."),Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"tmp")," directory storage: 512 MB.")),Object(o.b)("p",null,"To grant ",Object(o.b)("strong",{parentName:"p"},"cross-account permission to a function"),", we have to modify the function policy, not the execution role policy."),Object(o.b)("p",null,"The console doesn't support directly ",Object(o.b)("strong",{parentName:"p"},"modifying permissions in a function policy"),". You have to do it from the CLI or SDK."),Object(o.b)("p",null,"If we run ",Object(o.b)("strong",{parentName:"p"},"lambda functions inside a VPN"),", they use ",Object(o.b)("strong",{parentName:"p"},"subnet IPs or ENIs"),". There should be sufficient ones otherwise it will get throttled."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"ENI capacity")," = Projected peak concurrent executions * (Memory in GB / 3 GB)."),Object(o.b)("p",null,"The ",Object(o.b)("strong",{parentName:"p"},"lambda console")," provides ",Object(o.b)("strong",{parentName:"p"},"encryption and decryption helpers")," for encryption of environment variables. "),Object(o.b)("p",null,"By default, the a KMS default service key is used for encryption, which makes the information visible to anyone who has access to the lambda console. For further restriction, create a custom KMS key and use that to encrypt."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"CloudWatch metrics for Lambda")," \u2014"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Invocations"),Object(o.b)("li",{parentName:"ul"},"Errors"),Object(o.b)("li",{parentName:"ul"},"Dead Letter Error"),Object(o.b)("li",{parentName:"ul"},"Duration"),Object(o.b)("li",{parentName:"ul"},"Throttles"),Object(o.b)("li",{parentName:"ul"},"IteratorAge"),Object(o.b)("li",{parentName:"ul"},"ConcurrentExecutions"),Object(o.b)("li",{parentName:"ul"},"UnreservedConcurrentExecutions")),Object(o.b)("p",null,"We can get the ",Object(o.b)("strong",{parentName:"p"},"function version")," within the function using \u2014"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"getFunctionVersion")," from the Context object."),Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"AWS_LAMBDA_FUNCTION_VERSION")," environment variable. ")),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Lambda Retry upon Failure Behavior")," \u2014"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Event sources that aren't stream-based",Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},"Synchronous invocation \u2014 Returns error with ",Object(o.b)("strong",{parentName:"li"},"status code 200"),". Includes ",Object(o.b)("strong",{parentName:"li"},"FunctionError")," field and ",Object(o.b)("strong",{parentName:"li"},"X-Amz-Function-Error")," header."),Object(o.b)("li",{parentName:"ul"},"Asynchronous invocation \u2014 ",Object(o.b)("strong",{parentName:"li"},"Retry twice"),", then sent to ",Object(o.b)("strong",{parentName:"li"},"Dead Letter Queue"),"."))),Object(o.b)("li",{parentName:"ul"},"Poll-based and stream-based event source (Kinesis or DynamoDB) \u2014 Lambda keeps ",Object(o.b)("strong",{parentName:"li"},"retrying until the data expires"),". The exception is ",Object(o.b)("strong",{parentName:"li"},"blocking"),", this ensures the data are processed in order."),Object(o.b)("li",{parentName:"ul"},"Poll-based but not stream-based event source (SQS) \u2014 On unsuccessful processing or if the function times out of the message, it is ",Object(o.b)("strong",{parentName:"li"},"returned to the queue"),", and ready for further reprocessing after the visibility timeout period. If the function errors out, it is sent to ",Object(o.b)("strong",{parentName:"li"},"Dead Letter Queue"),".")),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Lambda traffic shifting")," \u2014"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Canary"),Object(o.b)("li",{parentName:"ul"},"Linear"),Object(o.b)("li",{parentName:"ul"},"All at once")),Object(o.b)("h2",{id:"vpc"},"VPC"),Object(o.b)("p",null,"We cannot route traffic to a ",Object(o.b)("strong",{parentName:"p"},"NAT gateway")," or ",Object(o.b)("strong",{parentName:"p"},"VPC gateway endpoints")," through a ",Object(o.b)("strong",{parentName:"p"},"VPC peering")," connection, a ",Object(o.b)("strong",{parentName:"p"},"VPN connection"),", or ",Object(o.b)("strong",{parentName:"p"},"AWS Direct Connect"),". A NAT gateway or VPC gateway endpoints cannot be used by resources on the other side of these connections. Conversely, a NAT gateway // VPC gateway endpoints cannot send traffic over VPC endpoints, AWS VPN connections, Direct Connect or VPC Peering connections either."),Object(o.b)("p",null,"Every route table contains a ",Object(o.b)("strong",{parentName:"p"},"local route")," for communication within the VPC over IPv4. We ",Object(o.b)("strong",{parentName:"p"},"cannot modify or delete")," these routes."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"VPC endpoints always take precedence")," over NAT Gateways or Internet Gateways. "),Object(o.b)("p",null,"Network ACL ",Object(o.b)("strong",{parentName:"p"},"rules are evaluated in order"),", starting with the lowest numbered rule. As soon as a rule matches, it is applied regardless of any higher numbered rule that may contradict it."),Object(o.b)("p",null,"SSH connections are between port 22 of the host and ",Object(o.b)("strong",{parentName:"p"},"an ephemeral port of the client"),". In fact, this is true for any TCP service."),Object(o.b)("p",null,"Security groups are ",Object(o.b)("strong",{parentName:"p"},"stateful"),", this means any connection initiated successfully will be completed."),Object(o.b)("p",null,"We can create ",Object(o.b)("strong",{parentName:"p"},"S3 proxy server")," for enabling use cases where S3 has to be accessed privately through VPN connection, AWS Direct Connect or VPC peering."),Object(o.b)("p",null,"AWS ",Object(o.b)("strong",{parentName:"p"},"reserves 5 IPs for every subnet"),", not for every VPC."),Object(o.b)("p",null,"Instances in ",Object(o.b)("strong",{parentName:"p"},"custom VPCs don't get public DNS hosts by default"),", we have to set the ",Object(o.b)("inlineCode",{parentName:"p"},"enableDnsHostnames")," attribute to true. The ",Object(o.b)("inlineCode",{parentName:"p"},"enableDnsSupport")," is to be set to true too, but that is done by default."),Object(o.b)("p",null,"We can set a ",Object(o.b)("strong",{parentName:"p"},"custom route table as the main route table"),"."),Object(o.b)("p",null,"We can add ",Object(o.b)("strong",{parentName:"p"},"secondary CIDR ranges"),' to an existing VPC. When a secondary CIDR block is added to a VPC, a route for that block with target as "local" is automatically added to the route table.'),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"VPC peering")," connection route contains Target as ",Object(o.b)("inlineCode",{parentName:"p"},"pcx-xxxxxx"),".\n",Object(o.b)("strong",{parentName:"p"},"VPN connection")," // ",Object(o.b)("strong",{parentName:"p"},"Direct Connect")," connection route contains Target as ",Object(o.b)("inlineCode",{parentName:"p"},"vgw-xxxxxx"),"."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"VPN")," is established over a ",Object(o.b)("strong",{parentName:"p"},"Virtual Private Gateway"),"."),Object(o.b)("p",null,"There are two types of VPC Endpoints \u2014  "),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("strong",{parentName:"li"},"Gateway endpoints support only S3 and DynamoDB"),". "),Object(o.b)("li",{parentName:"ul"},Object(o.b)("strong",{parentName:"li"},"Interface endpoints")," (Powered by ",Object(o.b)("strong",{parentName:"li"},"PrivateLink"),") supports Amazon ECR and many other services.")),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Difference between DirectConnect and VPN")," \u2014 DirectConnect does not involve the Internet, while VPN does."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"AWS Direct Connect")," doesn't ",Object(o.b)("strong",{parentName:"p"},"encrypt in transit data"),", while ",Object(o.b)("strong",{parentName:"p"},"VPN")," does."),Object(o.b)("p",null,"To establish a ",Object(o.b)("strong",{parentName:"p"},"VPN connection"),", we need \u2014"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"A public IP address on the customer gateway for the on-premise network."),Object(o.b)("li",{parentName:"ul"},"A virtual private gateway attached to the VPC.")),Object(o.b)("p",null,"To setup ",Object(o.b)("strong",{parentName:"p"},"AWS VPN CloudHub")," \u2014"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Each regional site should have non overlapping IP prefixes."),Object(o.b)("li",{parentName:"ul"},"BGP ASN should be unique at each site."),Object(o.b)("li",{parentName:"ul"},"If BGP ASN are not unique, additional ALLOW-INs will be required.")),Object(o.b)("p",null,"The ",Object(o.b)("strong",{parentName:"p"},"allowed block size")," in VPC is between a /16 netmask (65,536 IP addresses) and /28 netmask (16 IP addresses)."),Object(o.b)("p",null," The following ",Object(o.b)("strong",{parentName:"p"},"VPC peering connection configurations")," are ",Object(o.b)("strong",{parentName:"p"},"not supported")," \u2014"),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},"Overlapping CIDR Blocks"),Object(o.b)("li",{parentName:"ol"},"Transitive Peering"),Object(o.b)("li",{parentName:"ol"},"Edge to Edge Routing Through a Gateway or Private Connection")),Object(o.b)("p",null,"We can move part of our ",Object(o.b)("strong",{parentName:"p"},"on-premise address space to AWS"),". This is called BYOIP. For this, we have to acquire a ",Object(o.b)("strong",{parentName:"p"},"ROA, Root Origin Authorization")," from the the regional internet registry and submit it to Amazon."),Object(o.b)("h2",{id:"dynamodb"},"DynamoDB"),Object(o.b)("p",null,"AWS ",Object(o.b)("strong",{parentName:"p"},"DynamoDB")," is durable, ACID compliant, can go through multiple schema changes, and changes to the database does not result in any database downtime."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"DynamoDB Global Tables")," can be used to deploy a multi region, multi AZ, fully managed database solution."),Object(o.b)("p",null,"We can create ",Object(o.b)("strong",{parentName:"p"},"secondary indexes")," for ",Object(o.b)("strong",{parentName:"p"},"DynamoDB")," tables. Always choose DynamoDB when possible."),Object(o.b)("p",null,"DynamoDB streams can be used to monitor changes made to a database, and they can trigger lambda functions."),Object(o.b)("p",null,"We can turn on ",Object(o.b)("strong",{parentName:"p"},"autoscaling for DynamoDB"),"."),Object(o.b)("p",null,"For ",Object(o.b)("strong",{parentName:"p"},"write heavy")," use cases in ",Object(o.b)("strong",{parentName:"p"},"DynamoDB"),", use partition keys with large number of distinct values."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"DynamoDB Accelerator, DAX")," is an ",Object(o.b)("strong",{parentName:"p"},"in-memory cache for DynamoDB")," that reduces response time from milliseconds to microseconds."),Object(o.b)("h2",{id:"ecs"},"ECS"),Object(o.b)("p",null,"Launch types \u2014"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Fargate"),Object(o.b)("li",{parentName:"ul"},"EC2")),Object(o.b)("p",null,"All types of instances, i.e. ",Object(o.b)("strong",{parentName:"p"},"on-demand, spot and reserved can be used with ECS"),"."),Object(o.b)("p",null,"Docker containers and ECS are particularly ",Object(o.b)("strong",{parentName:"p"},"suited for batch job workloads")," as they can get embarassingly parallel. "),Object(o.b)("p",null,"Amazon ECS enables you to ",Object(o.b)("strong",{parentName:"p"},"inject sensitive data into your containers")," by storing your sensitive data in either \u2014"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"AWS Secrets Manager secrets"),Object(o.b)("li",{parentName:"ul"},"AWS Systems Manager Parameter Store parameters")),Object(o.b)("h2",{id:"elastic-beanstalk"},"Elastic Beanstalk"),Object(o.b)("p",null,"AWS ",Object(o.b)("strong",{parentName:"p"},"Elastic Beanstalk")," can be used to create \u2014"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Web application using DB"),Object(o.b)("li",{parentName:"ul"},"Capacity provisioning and load balancing of websites"),Object(o.b)("li",{parentName:"ul"},"Long running worker process"),Object(o.b)("li",{parentName:"ul"},"Static website")),Object(o.b)("p",null,"It should not be used to create tasks which are run once or on a nightly basis, because the infrastructure is provisioned and will be running 24/7."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Elastic Beanstalk")," can be used to host ",Object(o.b)("strong",{parentName:"p"},"Docker containers"),"."),Object(o.b)("h2",{id:"storage-gateway"},"Storage Gateway"),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"AWS Storage Gateways"),"\u2014"),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},"File gateway"),Object(o.b)("li",{parentName:"ol"},"Volume gateway: Cached volumes"),Object(o.b)("li",{parentName:"ol"},"Volume gateway: Stored volumes"),Object(o.b)("li",{parentName:"ol"},"Tape gateway")),Object(o.b)("h2",{id:"iam-cognito-and-directory-services"},"IAM, Cognito and Directory Services"),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Amazon Cognito")," has two ",Object(o.b)("strong",{parentName:"p"},"authentication methods"),", ",Object(o.b)("strong",{parentName:"p"},"independent")," of one another \u2014"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Sign in via third party federation"),Object(o.b)("li",{parentName:"ul"},"Cognito user pools")),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"AWS Directory Service")," options \u2014"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"AWS Managed Microsoft AD"),Object(o.b)("li",{parentName:"ul"},"AD Connector"),Object(o.b)("li",{parentName:"ul"},"Simple AD"),Object(o.b)("li",{parentName:"ul"},"Amazon Cloud Directory"),Object(o.b)("li",{parentName:"ul"},"Amazon Cognito")),Object(o.b)("p",null,"There is no ",Object(o.b)("strong",{parentName:"p"},"default policy")," ever, anywhere. When permissions are checked, roles and policies are considered together, and in the default case there is no policy, so only the role is considered."),Object(o.b)("p",null,"We can configure ",Object(o.b)("strong",{parentName:"p"},"IAM policies")," that allows ",Object(o.b)("strong",{parentName:"p"},"access to specific tags"),"."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Connecting AWS SSO to On-Premise Active Directory")," \u2014"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("strong",{parentName:"li"},"Two-way trust relationship"),": ",Object(o.b)("strong",{parentName:"li"},"Preferred"),". Users can do everything from both portals."),Object(o.b)("li",{parentName:"ul"},Object(o.b)("strong",{parentName:"li"},"AD connector"),": SSO does not cache user credentials. Users can't reset password from SSO portal, have to do it from on-premise portal.")),Object(o.b)("p",null,"For ",Object(o.b)("strong",{parentName:"p"},"two-step verification"),", SSO sends ",Object(o.b)("strong",{parentName:"p"},"code to registered email"),". It can set to be either \u2014"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Always-on"),Object(o.b)("li",{parentName:"ul"},"Context-aware")),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Cross-account IAM roles")," allow customers to securely grant access to AWS resources in their account to a third party."),Object(o.b)("p",null,"If our identity store is not compatible with SAML, we can develop a custom application on-premise and use it with STS."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Microsoft Active Directory")," supports ",Object(o.b)("strong",{parentName:"p"},"SAML"),". "),Object(o.b)("h2",{id:"kms-and-cloudhsm"},"KMS and CloudHSM"),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"KMS")," master keys are region specific."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"CloudHSM backup procedure")," \u2014 Ephemeral backup key (EBK) is used to encrypt data and Persistent backup key (PBK) is used to encrypt EBK before saving it to an S3 bucket in the same region as that of AWS CloudHSM cluster."),Object(o.b)("p",null,"With ",Object(o.b)("strong",{parentName:"p"},"AWS CoudHSM"),", we can control the entire lifecycle around the keys."),Object(o.b)("p",null,"AWS KMS API can be used to encrypt data."),Object(o.b)("h2",{id:"kinesis"},"Kinesis"),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Kinesis stream data retention period")," \u2014 24 hours (default) to 168 hours."),Object(o.b)("p",null,"For ",Object(o.b)("strong",{parentName:"p"},"Kinesis"),", we have to use ",Object(o.b)("strong",{parentName:"p"},"VPC Interface Endpoint"),", powered by ",Object(o.b)("strong",{parentName:"p"},"AWS PrivateLink"),"."),Object(o.b)("p",null,"Amazon ",Object(o.b)("strong",{parentName:"p"},"Kinesis Scaling Utility")," is a ",Object(o.b)("strong",{parentName:"p"},"less cost-effective")," solution compared to doing it with ",Object(o.b)("strong",{parentName:"p"},"Cloudwatch alarms + API Gateway + Lambda function"),"."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Kinesis data streams")," store the data, by default for 24 hours and upto 7 days. Whereas ",Object(o.b)("strong",{parentName:"p"},"Kinesis Firehose")," stream the data directly into either \u2014"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"S3"),Object(o.b)("li",{parentName:"ul"},"Redshift"),Object(o.b)("li",{parentName:"ul"},"Amazon Elasticsearch Service"),Object(o.b)("li",{parentName:"ul"},"Splunk")),Object(o.b)("p",null,"Kinesis \u2014 If ShardIterator expires immediately and data is lost, we have to increase the write capacity assigned to the Shard table."),Object(o.b)("h2",{id:"emr"},"EMR"),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"AWS EMR")," \u2014 AWS Elastic MapReduce, Hadoop based big data analytics."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"AWS EMR")," is preferred for ",Object(o.b)("strong",{parentName:"p"},"processing log files"),"."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"EMR")," can use ",Object(o.b)("strong",{parentName:"p"},"spot instances")," as underlying nodes."),Object(o.b)("p",null,"We can access the underlying EC2 instances in AWS EMR cluster."),Object(o.b)("h2",{id:"misc"},"Misc"),Object(o.b)("p",null,"AWS STS \u2014 The ",Object(o.b)("strong",{parentName:"p"},"policy of the temporary credentials")," generated by STS are defined by the intersection of your IAM user policies and the policy that you pass as argument."),Object(o.b)("p",null,"AWS ",Object(o.b)("strong",{parentName:"p"},"VM Import")," // Export can be used to transfer virtual machines from local infrastructure to AWS and vice-versa."),Object(o.b)("p",null,"AWS ",Object(o.b)("strong",{parentName:"p"},"Trusted Advisor")," is a resource that helps users with cost management, performance and security."),Object(o.b)("p",null,"We can create a ",Object(o.b)("strong",{parentName:"p"},"CloudTrail log across all regions"),"."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"CloudFormation Drift Detection")," can be used to detect changes in the environment. Drift Detection only ",Object(o.b)("strong",{parentName:"p"},"checks property values which are explicitly set")," by stack templates or by specifying template parameters. It does not determine drift for property values which are set by default."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"AWS Server Migration Service (SMS)")," is an agentless service which makes it easier and faster for you to migrate thousands of on-premise workloads to AWS."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"AWS Athena")," is a managed service which can be used to make interactive ",Object(o.b)("strong",{parentName:"p"},"search queries to S3 data"),"."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Amazon Inspector")," is a security assessment service, which helps improve security and compliance of applications."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"AWS Opsworks")," is a configuration management service for Chef and Puppet. With ",Object(o.b)("strong",{parentName:"p"},"Opsworks Stacks"),", we can model our application as ",Object(o.b)("strong",{parentName:"p"},"a stack containing different layers"),"."),Object(o.b)("p",null,"By default, ",Object(o.b)("strong",{parentName:"p"},"CloudTrail logs are encrypted")," using S3 server-side encryption (SSE). We can also choose to encrypt with AWS KMS."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Amazon ECS for Kubernetes (EKS)")," exists, it's a managed service."),Object(o.b)("p",null,"Changes to ",Object(o.b)("strong",{parentName:"p"},"CloudTrail global service event logs")," can only be done via the CLI or the SDKs, not the console."),Object(o.b)("p",null,"For ",Object(o.b)("strong",{parentName:"p"},"CloudFront query string")," forwarding, the parameter names and values used are ",Object(o.b)("strong",{parentName:"p"},"case sensitive"),"."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"AWS Polly")," \u2014 Lexicons are specific to a region. For a single text appearing multiple times, we can create alias using multiple Lexicons."),Object(o.b)("p",null,"Amazon ",Object(o.b)("strong",{parentName:"p"},"Quicksight")," is a managed service for ",Object(o.b)("strong",{parentName:"p"},"creating dashboards")," with data visualization."),Object(o.b)("p",null,"AWS ",Object(o.b)("strong",{parentName:"p"},"Athena pricing")," is based upon per query and amount of data scanned in each query. To ",Object(o.b)("strong",{parentName:"p"},"reduce price")," \u2014"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Partition data based on different parameters so that amount of data scanned gets reduced."),Object(o.b)("li",{parentName:"ul"},"Create separate workgroups based upon user groups.")),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"AWS CloudSearch")," helps us add search to our website or application. ",Object(o.b)("strong",{parentName:"p"},"Like Elasticsearch"),"."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"AWS Glue")," is a fully ",Object(o.b)("strong",{parentName:"p"},"managed ETL service")," for data. It ",Object(o.b)("strong",{parentName:"p"},"keeps a track of processed data using Job Bookmark"),". Enabling Job Bookmark will help to ",Object(o.b)("strong",{parentName:"p"},"scan only changes since last bookmark")," and prevent processing of whole data again."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"AWS X-Ray")," \u2014 Helps debug and ",Object(o.b)("strong",{parentName:"p"},"analyze microservices architecture"),"."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Reducing cost with AWS X-Ray")," \u2014 Sampling at a lower rate."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Amazon WorkDocs")," has a ",Object(o.b)("strong",{parentName:"p"},"poweruser")," facility, which on enabling restricts sharing of documents to that user only."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"AWS Data Pipeline")," can automate the movement and transformation of data for data-driven workflows. For example, transferring older data to S3 from DynamoDB."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Disaster recovery solutions")," \u2014"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Backup and Restore. Cheapest."),Object(o.b)("li",{parentName:"ul"},"Pilot Light"),Object(o.b)("li",{parentName:"ul"},"Warm Standby"),Object(o.b)("li",{parentName:"ul"},"Multi-Site"),Object(o.b)("li",{parentName:"ul"},"Multiple AWS Regions. Costliest.")),Object(o.b)("p",null,"With ",Object(o.b)("strong",{parentName:"p"},"AWS Config"),", we can get a snapshot of the current configuration of our AWS account."),Object(o.b)("p",null,"For ",Object(o.b)("strong",{parentName:"p"},"queue based processing"),", scaling EC2 instances based on the size of the queue is a preferred architecture."),Object(o.b)("p",null,"It's best practice to launch Amazon ",Object(o.b)("strong",{parentName:"p"},"RDS instance outside an Elastic Beanstalk environment"),"."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"AWS Athena is simpler")," and requires less effort to set up ",Object(o.b)("strong",{parentName:"p"},"than AWS Quicksight"),"."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"RI Coverage Budget")," reports number of instances that are part of Reserved Instance. For an organisation using default IAM policy, each member account owner needs to create a budget policy for individual accounts and not by master account."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Consolidated Billing")," in AWS Organisations combines usage from all accounts and billing is generated based upon total usage. Services like ",Object(o.b)("strong",{parentName:"p"},"EC2 and S3 have volume pricing tiers")," where with more usage volume the overall charge decreases."),Object(o.b)("p",null,"To automatically trigger ",Object(o.b)("strong",{parentName:"p"},"CodePipeline")," with changes in source ",Object(o.b)("strong",{parentName:"p"},"S3")," bucket, use ",Object(o.b)("strong",{parentName:"p"},"CloudWatch Events rule")," and ",Object(o.b)("strong",{parentName:"p"},"CloudTrail trail"),"."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Amazon Data Lifecycle Manager")," can be used for creation, retention and deletion of EBS snapshots."),Object(o.b)("p",null,"With ",Object(o.b)("strong",{parentName:"p"},"AWS Organizations"),", we can centrally manage policies across multiple AWS accounts. With ",Object(o.b)("strong",{parentName:"p"},"Service Control Policies (SCPs)"),", we can ensure security policies are in place."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"AWS WAF")," is a web application firewall."),Object(o.b)("p",null,"In ",Object(o.b)("strong",{parentName:"p"},"AWS Managed Blockchain network"),", the format for ",Object(o.b)("strong",{parentName:"p"},"resource endpoint")," is \u2014 ",Object(o.b)("inlineCode",{parentName:"p"},"ResourceID.MemberID.NetworkID.managedblockchain.us-east-1.amazonaws.com:PortNumber"),"."),Object(o.b)("p",null,"When you want to keep your expenditure within a budget, use ",Object(o.b)("strong",{parentName:"p"},"AWS Budgets"),", not AWS Cost Explorer."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Cloudwatch monitoring schemes")," \u2014"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Basic. 5 minutes."),Object(o.b)("li",{parentName:"ul"},"Detailed. 1 minute."),Object(o.b)("li",{parentName:"ul"},"Custom. Can be down to 1 second.")),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Transferring data")," from an EC2 instance to Amazon S3, Amazon Glacier, Amazon DynamoDB, Amazon SES, Amazon SQS, or Amazon SimpleDB ",Object(o.b)("strong",{parentName:"p"},"in the same AWS Region has no cost at all"),"."),Object(o.b)("p",null,"We can use ",Object(o.b)("strong",{parentName:"p"},"signed URLs and signed cookies with Cloudfront")," to protect resources."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Amazon MQ")," is a message queue which supports industry standard messaging protocols."),Object(o.b)("p",null,"Slower login time and 504 errors in front of Cloudfront can be optimized by \u2014"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Lambda @ Edge."),Object(o.b)("li",{parentName:"ul"},"Setting up an Origin Failover Policy.")),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"AWS Shield")," is a service that protects resources against DDoS attacks to EC2, ELB, Cloudfront and Route53."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"AWS IoT Core")," is a managed service that lets IoT devices connect and interact with AWS applications and resources."),Object(o.b)("p",null,"The following storage have ",Object(o.b)("strong",{parentName:"p"},"encryption at rest by default")," \u2014"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"AWS Glacier"),Object(o.b)("li",{parentName:"ul"},"Storage Gateway in S3")),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Perfect Forward Secrecy")," is supported by \u2014"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Cloudfront"),Object(o.b)("li",{parentName:"ul"},"Elastic Load Balancing")),Object(o.b)("p",null,"Enabling ",Object(o.b)("strong",{parentName:"p"},"multiple domains to serve HTTPS")," over same IP address \u2014- Generate an SSL cert with AWS Certificate Manager and create a Cloudfront distribution. Associate cert with distribution and enable Server Name Indication (SNI)."),Object(o.b)("p",null,"Classic Load Balancer does not support ",Object(o.b)("strong",{parentName:"p"},"SNI"),", we have to use Application Load Balancer or Cloudfront."),Object(o.b)("p",null,"The following services enable us to ",Object(o.b)("strong",{parentName:"p"},"run SQL queries directly against S3 data")," \u2014"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"AWS Athena"),Object(o.b)("li",{parentName:"ul"},"Redshift Spectrum"),Object(o.b)("li",{parentName:"ul"},"S3 Select")),Object(o.b)("p",null,"By default, each workflow execution can run for a ",Object(o.b)("strong",{parentName:"p"},"maximum of 1 year")," in Amazon SWF. "),Object(o.b)("p",null,"In ",Object(o.b)("strong",{parentName:"p"},"AWS SWF"),", a ",Object(o.b)("strong",{parentName:"p"},"decision task")," tells the decider the state of the workflow execution."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Third party SSL cert")," can be imported into \u2014"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"AWS Certificate Manager"),Object(o.b)("li",{parentName:"ul"},"IAM Certificate Store")))}s.isMDXComponent=!0}}]);