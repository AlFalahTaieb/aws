<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.65">
<title data-react-helmet="true">API Gateway | AWS SAA-C02 Ressources</title><meta data-react-helmet="true" name="docsearch:version" content="current,latest"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="API Gateway | AWS SAA-C02 Ressources"><meta data-react-helmet="true" name="description" content="export const Quote = ({ children, color }) =&gt; ("><meta data-react-helmet="true" property="og:description" content="export const Quote = ({ children, color }) =&gt; ("><meta data-react-helmet="true" property="og:url" content="https://AlFalahTaieb.github.io/aws/docs/notes_apig"><link data-react-helmet="true" rel="shortcut icon" href="/aws/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://AlFalahTaieb.github.io/aws/docs/notes_apig"><link rel="stylesheet" href="/aws/styles.d664286d.css">
<link rel="preload" href="/aws/styles.e3d237d5.js" as="script">
<link rel="preload" href="/aws/runtime~main.5987bc8c.js" as="script">
<link rel="preload" href="/aws/main.db8832c0.js" as="script">
<link rel="preload" href="/aws/2.eacc328a.js" as="script">
<link rel="preload" href="/aws/3.5084f581.js" as="script">
<link rel="preload" href="/aws/66.73ad6aef.js" as="script">
<link rel="preload" href="/aws/67.520034c4.js" as="script">
<link rel="preload" href="/aws/935f2afb.52a1d31c.js" as="script">
<link rel="preload" href="/aws/17896441.17a33e11.js" as="script">
<link rel="preload" href="/aws/b32842e5.582bb3bc.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" target="_self" href="/aws/docs/start"><img class="navbar__logo" src="/aws/img/logo.svg" alt="My Site Logo"><strong class="navbar__title">AWS SAA-C02 Ressources</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/aws/docs/">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://alfelah.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Taieb</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">üåú</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">üåû</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" target="_self" href="/aws/docs/start"><img class="navbar__logo" src="/aws/img/logo.svg" alt="My Site Logo"><strong class="navbar__title">AWS SAA-C02 Ressources</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/aws/docs/">Docs</a></li><li class="menu__list-item"><a href="https://alfelah.com" target="_blank" rel="noopener noreferrer" class="menu__link">Taieb</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">AWS Certified Solutions Architect Guide</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/start">Getting Started üèéÔ∏è</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/raz">Regions &amp; AZ</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_sg">Security Groups</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_iam">IAM</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_ec2">EC2</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_asg">ASG</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_elb">ELB</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_ebs_efs">EBS &amp; EFS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_fsx">FSx</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_s3">S3</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_storage_ex">Storage Extras</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_athena">Athena</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_datasync">DataSync</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_cli_sdk">CLI &amp; SDK</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_rds">RDS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_redshift">Redshift</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_lambda">Lambda</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_dynamodb">DynamoDB</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/aws/docs/notes_apig">API Gateway</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_cognito">Cognito</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_ec">ElastiCache</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_r53">Route 53</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_cf">CloudFront</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_bs">BeanStalk</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_sqs">SQS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_sns">SNS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_kenesis">Kenesis</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_cw">CloudWAtch</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_ct">CloudTrail</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_kms">KMS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_ssm">SSM</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_sw">Shield &amp; WAF</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_vpc">VPC</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_ecs">ECS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_cfm">CloudFormation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_ss">SWF &amp; Step Function</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_os">Other Services</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_dr">Disaster Recovery</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_hpc">HPC</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_fp">Five Pillars</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes">Notes for AWS Certified Solutions Architect Associate</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">API Gateway</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="i-introduction"></a>I. Introduction<a aria-hidden="true" tabindex="-1" class="hash-link" href="#i-introduction" title="Direct link to heading">#</a></h2><ol><li><p>API Gateway acts as a ‚Äúfront door‚Äù for applications to access data, business logic, or functionality from your back-end services, such as applications running on EC2, ECS, Beanstalk etc</p></li><li><p>Can process thousands of concurrent API calls</p></li><li><p>Can create HTTP, REST or websocket API</p></li><li><p><strong>Lambda + Gateway = No infra to manage</strong></p></li><li><p>Support for websockets</p></li><li><p>Support for API versioning</p></li><li><p>Handle different env (dev, prod)</p></li><li><p>Handle security, protection from DDoS</p></li><li><p>Create API keys, handle request throttling</p></li><li><p>Swagger and OpenAPI support for quick docs</p></li><li><p>Transform and validate requests and responses</p></li><li><p>Generate SDK and API specs</p></li><li><p>Cache API responses</p></li><li><p><strong>Edge-optimized (default, global)</strong></p><ol><li>Requests are routed through the CloudFront edge locations</li><li>The API Gateway still lives in one region</li></ol></li><li><p><strong>Regional</strong></p><ol><li>For clients within same region</li><li>Could manually combine with CloudFront (more control over caching)</li></ol></li><li><p><strong>Private</strong></p><ol><li>Can only be accessed inside a VPC</li><li>Use a resource policy to define access</li></ol></li><li><p>IAM</p><ol><li>Create an IAM policy authorization and attach User/Role</li><li>API Gateway verifies IAM permissions passed by the calling application</li><li>Good to provide access within your own infrastructure</li><li>Leverages sigv4 where IAM credentials are in the header</li></ol></li></ol><p><img alt="API Gateway AWS" src="/aws/assets/images/apig1-b1ee66699414383a0d5bdf2b9bd821a0.png"></p><ol start="18"><li>Lambda (custom) Authorizer<ol><li>Uses lambda to validate token in the header</li><li>Option to cache result of auth, say 1 hour</li><li>Helps to use OAuth/SAML/third-party auth</li><li>Lambda must return a policy for the user</li></ol></li></ol><p><img alt="API Gateway AWS" src="/aws/assets/images/apig2-13ab44b0c169e27c2da53efa81740a24.png"></p><ol start="19"><li>Cognito user pools<ol><li>Cognito fully manages user lifecycle</li><li>API gateway verifies identity automatically from Cognito</li><li>No custom implementation required</li><li>Cognito only helps with authentication, not authorization</li></ol></li></ol><p><img alt="API Gateway AWS" src="/aws/assets/images/apig3-023a42e91158571b6620b5ad7f34d12e.png"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="ii-why-api-gateway"></a>II. Why API Gateway?<a aria-hidden="true" tabindex="-1" class="hash-link" href="#ii-why-api-gateway" title="Direct link to heading">#</a></h2><p>Amazon API Gateway provides developers with a simple, flexible, fully managed, pay-as-you-go service that handles all aspects of creating and operating robust APIs for application back ends.</p><ol><li><strong>Metering</strong> ‚Äî API Gateway helps you define plans that meter and restrict third-party developer access to your APIs. You can define a set of plans, configure throttling, and quota limits on a per API key basis. API Gateway automatically meters traffic to your APIs and lets you extract utilization data for each API key.</li><li><strong>Security</strong> ‚Äî API Gateway allows you to leverage AWS administration and security tools, such as IAM and Cognito, to authorize access to your APIs. Can also help you verify incoming bearer tokens, removing authorization concerns from your backend code.</li><li><strong>Resiliency</strong> ‚Äî API Gateway helps you <span style="background-color:#5a5a5a;border-radius:8px;color:#FF9900;padding:0.21rem">manage traffic w/ throttling</span> so that backend operations can withstand traffic spikes. API Gateway also helps you improve the performance of your APIs and the latency your end users experience by <strong>caching the output of API calls to avoid calling your backend every time.</strong></li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="iii-api-gateway-tips"></a>III. API Gateway Tips<a aria-hidden="true" tabindex="-1" class="hash-link" href="#iii-api-gateway-tips" title="Direct link to heading">#</a></h2><ol><li>You can enable API caching in Amazon API Gateway to cache your endpoint&#x27;s responses. With caching, you can reduce the number of calls made to your endpoint and also improve the latency of requests to your API.</li><li><strong>When you enable caching for a stage, API Gateway caches responses from your endpoint for a specified time-to-live (TTL) period, in seconds.</strong> API Gateway then responds to the request by looking up the endpoint response from the cache instead of making a request to your endpoint. The default TTL value for API caching is 300 seconds. The maximum TTL value is 3600 seconds. TTL=0 means caching is disabled.</li><li>When request submissions exceed the steady-state request rate and burst limits, API Gateway fails the limit-exceeding requests and returns <code>429 Too Many Requests</code> error responses to the client.</li><li><span style="background-color:#5a5a5a;border-radius:8px;color:#FF9900;padding:0.21rem">Per-client throttling limits are applied to clients</span> that use API keys associated with your usage policy as client identifier. This can be applied to the single customer that is issuing excessive API requests.</li><li><span style="background-color:#5a5a5a;border-radius:8px;color:#FF9900;padding:0.21rem">Cache is enabled for stage, NOT for method.</span></li><li>You can enable <strong>throttling</strong> &amp;&amp; <strong>result caching</strong> to limit number of requests and prevent your backend from getting crashed.</li><li>API Gateway can execute lambda, step functions, Beanstalk and external HTTP services.</li><li>You can sell your API Gateway on Amazon Marketplace.</li><li>Integrated with CloudWatch so you get performance metrics like API calls, latency and error rates. Can set up custom alarms.</li><li><span style="background-color:#5a5a5a;border-radius:8px;color:#FF9900;padding:0.21rem">Can enable WAF to protect against XSS and SQL Injection.</span></li><li>You only pay for API calls you receive and the amount of data transferred out.</li><li><span style="background-color:#5a5a5a;border-radius:8px;color:#FF9900;padding:0.21rem">You can use X-Ray to trace and analyze user requests as they travel through API Gateway.</span></li><li>For using proxy integration, the lambda output MUST be JSON.</li><li>All API calls made to the Amazon API Gateway APIs to create, modify, delete, or deploy REST APIs are logged to CloudTrail in your AWS account.</li><li>Amazon API Gateway logs API calls, latency, and error rates to Amazon CloudWatch in your AWS account. Optionally, you can enable <strong>detailed metrics</strong> for each method in your REST API, billed to regular CloudWatch rates.</li></ol></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/aws/docs/notes_dynamodb"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">¬´ DynamoDB</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/aws/docs/notes_cognito"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Cognito ¬ª</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#i-introduction" class="table-of-contents__link">I. Introduction</a></li><li><a href="#ii-why-api-gateway" class="table-of-contents__link">II. Why API Gateway?</a></li><li><a href="#iii-api-gateway-tips" class="table-of-contents__link">III. API Gateway Tips</a></li></ul></div></div></div></div></main></div></div></div>
<script src="/aws/styles.e3d237d5.js"></script>
<script src="/aws/runtime~main.5987bc8c.js"></script>
<script src="/aws/main.db8832c0.js"></script>
<script src="/aws/2.eacc328a.js"></script>
<script src="/aws/3.5084f581.js"></script>
<script src="/aws/66.73ad6aef.js"></script>
<script src="/aws/67.520034c4.js"></script>
<script src="/aws/935f2afb.52a1d31c.js"></script>
<script src="/aws/17896441.17a33e11.js"></script>
<script src="/aws/b32842e5.582bb3bc.js"></script>
</body>
</html>