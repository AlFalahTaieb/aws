<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.65">
<title data-react-helmet="true">ECS | AWS SAA-C02 Ressources</title><meta data-react-helmet="true" name="docsearch:version" content="current,latest"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="ECS | AWS SAA-C02 Ressources"><meta data-react-helmet="true" name="description" content="export const Quote = ({ children, color }) =&gt; ("><meta data-react-helmet="true" property="og:description" content="export const Quote = ({ children, color }) =&gt; ("><meta data-react-helmet="true" property="og:url" content="https://AlFalahTaieb.github.com/FAQ/docs/notes_ecs"><link data-react-helmet="true" rel="shortcut icon" href="/FAQ/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://AlFalahTaieb.github.com/FAQ/docs/notes_ecs"><link rel="stylesheet" href="/FAQ/styles.d664286d.css">
<link rel="preload" href="/FAQ/styles.e3d237d5.js" as="script">
<link rel="preload" href="/FAQ/runtime~main.e2ff413d.js" as="script">
<link rel="preload" href="/FAQ/main.40da985c.js" as="script">
<link rel="preload" href="/FAQ/2.eacc328a.js" as="script">
<link rel="preload" href="/FAQ/3.5084f581.js" as="script">
<link rel="preload" href="/FAQ/66.73ad6aef.js" as="script">
<link rel="preload" href="/FAQ/67.520034c4.js" as="script">
<link rel="preload" href="/FAQ/935f2afb.a6a00775.js" as="script">
<link rel="preload" href="/FAQ/17896441.17a33e11.js" as="script">
<link rel="preload" href="/FAQ/b81e6e6b.4e6c6fce.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" target="_self" href="/FAQ/docs/start"><img class="navbar__logo" src="/FAQ/img/logo.svg" alt="My Site Logo"><strong class="navbar__title">AWS SAA-C02 Ressources</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/FAQ/docs/">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://alfelah.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Taieb</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">üåú</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">üåû</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" target="_self" href="/FAQ/docs/start"><img class="navbar__logo" src="/FAQ/img/logo.svg" alt="My Site Logo"><strong class="navbar__title">AWS SAA-C02 Ressources</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/FAQ/docs/">Docs</a></li><li class="menu__list-item"><a href="https://alfelah.com" target="_blank" rel="noopener noreferrer" class="menu__link">Taieb</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">AWS Certified Solutions Architect Guide</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/FAQ/docs/start">Getting Started üèéÔ∏è</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/FAQ/docs/raz">Regions &amp; AZ</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/FAQ/docs/notes_sg">Security Groups</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/FAQ/docs/notes_iam">IAM</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/FAQ/docs/notes_ec2">EC2</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/FAQ/docs/notes_asg">ASG</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/FAQ/docs/notes_elb">ELB</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/FAQ/docs/notes_ebs_efs">EBS &amp; EFS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/FAQ/docs/notes_fsx">FSx</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/FAQ/docs/notes_s3">S3</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/FAQ/docs/notes_storage_ex">Storage Extras</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/FAQ/docs/notes_athena">Athena</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/FAQ/docs/notes_datasync">DataSync</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/FAQ/docs/notes_cli_sdk">CLI &amp; SDK</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/FAQ/docs/notes_rds">RDS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/FAQ/docs/notes_redshift">Redshift</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/FAQ/docs/notes_lambda">Lambda</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/FAQ/docs/notes_dynamodb">DynamoDB</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/FAQ/docs/notes_apig">API Gateway</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/FAQ/docs/notes_cognito">Cognito</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/FAQ/docs/notes_ec">ElastiCache</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/FAQ/docs/notes_r53">Route 53</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/FAQ/docs/notes_cf">CloudFront</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/FAQ/docs/notes_bs">BeanStalk</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/FAQ/docs/notes_sqs">SQS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/FAQ/docs/notes_sns">SNS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/FAQ/docs/notes_kenesis">Kenesis</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/FAQ/docs/notes_cw">CloudWAtch</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/FAQ/docs/notes_ct">CloudTrail</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/FAQ/docs/notes_kms">KMS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/FAQ/docs/notes_ssm">SSM</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/FAQ/docs/notes_sw">Shield &amp; WAF</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/FAQ/docs/notes_vpc">VPC</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/FAQ/docs/notes_ecs">ECS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/FAQ/docs/notes_cfm">CloudFormation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/FAQ/docs/notes_ss">SWF &amp; Step Function</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/FAQ/docs/notes_os">Other Services</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/FAQ/docs/notes_dr">Disaster Recovery</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/FAQ/docs/notes_hpc">HPC</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/FAQ/docs/notes_fp">Five Pillars</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/FAQ/docs/notes">Notes for AWS Certified Solutions Architect Associate</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">ECS</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="i-introduction"></a>I. Introduction<a aria-hidden="true" tabindex="-1" class="hash-link" href="#i-introduction" title="Direct link to heading">#</a></h2><ol><li>It is a container orchestration service, helps run docker containers on EC2 machines.</li><li>ECS inlcudes<ol><li>ECS core: running ECS on user-provisioned EC2 instances</li><li>Fargate: running ECS tasks on AWS-provisioned compute (serverless)</li><li>EKS: running on ECS on AWS-provisioned k8s</li><li>ECR: container registry</li></ol></li><li>IAM security and roles are at the <span style="background-color:#5a5a5a;border-radius:8px;color:#FF9900;padding:0.21rem">ECS task level.</span></li><li>Direct integration with ALBs, auto scaling capability.</li><li>To start, you create a ECS cluster (set of EC2 instances), then define ECS service and finally the ECS tasks (individual containers).</li></ol><span style="background-color:#5a5a5a;border-radius:8px;color:#FF9900;padding:0.21rem">Tasks allow you to define a set of containers that you would like to be placed together (or part of the same placement decision), their properties, and how they may be linked.</span><p>Tasks include all the information that Amazon ECS needs to make the placement decision.</p><p>To launch a single container, your task Definition should only include one container definition.</p><p>When you run tasks using ECS, you place them in a cluster i.e. a logical grouping of resources. </p><p>Clusters are region-bound. </p><p>When using Fargate, ECS manages your cluster resources. When using EC2, you manage the group of containers.</p><p>Before you delete a cluster, you must delete the services and de-register the container instances inside that cluster.</p><p>ECS Task (IAM) Role ‚Äî to make sure each task has right roles to perform the needed actions. </p><span style="background-color:#5a5a5a;border-radius:8px;color:#FF9900;padding:0.21rem">You first need to create an IAM role for your task</span>, using the &#x27;Amazon EC2 Container Service Task Role‚Äô service role and attaching a policy with the required permissions.<p>When you create a new task definition or a task definition revision you can then specify a role by selecting it form the ‚ÄôTask Role‚Äô drop-down or using the <code>taskRoleArn</code> field in the JSON format.</p><p><strong>1 Task Defn = 1 IAM Role</strong></p><span style="background-color:#5a5a5a;border-radius:8px;color:#FF9900;padding:0.21rem">You can only apply one IAM role to a Task Definition so you must create a separate Task Definition. </span><p>A Task Definition is required to run Docker containers in Amazon ECS and you can specify the IAM role (Task Role) that the task should use for permissions.</p><p><img alt="ECS AWS" src="/FAQ/assets/images/ecs1-3816d5851bc45dc20aae86a48a773bd5.png"></p><ol start="6"><li>ALB integration<ol><li><span style="background-color:#5a5a5a;border-radius:8px;color:#FF9900;padding:0.21rem">Direct port-mapping possible</span></li><li>Run multiple instances of the same app on the same EC2 </li></ol></li></ol><p><img alt="ECS AWS" src="/FAQ/assets/images/ecs2-a396cc24868d68900eadf0ad8798ea5a.png"></p><ol start="7"><li>ECS setup ‚Äî config file </li></ol><p><img alt="ECS AWS" src="/FAQ/assets/images/ecs3-b44afbda35d360b76aa6f180568e3898.png"></p><ol start="8"><li>ECR ‚Äî fully integrated with IAM and ECS </li></ol><p><img alt="ECS AWS" src="/FAQ/assets/images/ecs4-fd5b9d238eeca6d622d09801a438c97b.png"></p><p><img alt="ECS AWS" src="/FAQ/assets/images/ecs5-fd5b9d238eeca6d622d09801a438c97b.png"></p><p><img alt="ECS AWS" src="/FAQ/assets/images/ecs6-2c103d7a55a4d50aa1b48490a494104f.png"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="ii-fargate"></a>II. Fargate<a aria-hidden="true" tabindex="-1" class="hash-link" href="#ii-fargate" title="Direct link to heading">#</a></h2><ol><li>In general, we have to create our own EC2 instances to launch ECS. If need to scale, manually add more EC2s so we are managing infra on our own.</li><li><span style="background-color:#5a5a5a;border-radius:8px;color:#FF9900;padding:0.21rem">Fargate does all the above ‚Äî serverless, no more EC2!</span></li><li>Fargate requires you to specify CPU and memory at task level. Task storage is ephemeral.</li><li><span style="background-color:#5a5a5a;border-radius:8px;color:#FF9900;padding:0.21rem">With Fargate, you pay for the vCPU and memory resources that your containerized app requests. The resources are calculated right from the time the container image is pulled till the ECS task terminates.</span></li><li><span style="background-color:#5a5a5a;border-radius:8px;color:#FF9900;padding:0.21rem">Sends log to CloudWatch.</span></li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="iii-eks"></a>III. EKS<a aria-hidden="true" tabindex="-1" class="hash-link" href="#iii-eks" title="Direct link to heading">#</a></h2><ol><li>ECS = AWS way, EKS = k8s way for managing containers.</li><li>Great way to migrate to AWS if running k8s already elsewhere.</li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="iv-ecs-tips"></a>IV. ECS Tips<a aria-hidden="true" tabindex="-1" class="hash-link" href="#iv-ecs-tips" title="Direct link to heading">#</a></h2><ol><li><p>Must choose the launch type at the time of creation e.g. EC2</p></li><li><span style="background-color:#5a5a5a;border-radius:8px;color:#FF9900;padding:0.21rem">The ECS container agent is included in the Amazon ECS-optimized AMI</span>and can also be installed on any EC2 instance that supports the ECS specification.</li><li><span style="background-color:#5a5a5a;border-radius:8px;color:#FF9900;padding:0.21rem">You need to verify that the installed agent is running and that the IAM instance profile has the necessary permissions applied.</span></li><li><p>There is no additional charge for Amazon ECS. You pay for AWS resources (e.g. EC2 instances or EBS volumes) you create to store and run your application.</p></li><li><p>You can scale your application up and down by changing the number of containers you want the service to run.</p></li><li><p>You can perform batch jobs by running Amazon ECS &quot;Run task&quot; to run one or more tasks once.</p></li><li><p>ECS provides Blox, a collection of open source projects for container management and orchestration.</p></li><li><p>ECS is PCI and HIPAA approved. Monthly uptime of 99.99%.</p></li><li><p>Amazon ECS schedules containers for execution on customer-controlled Amazon EC2 instances or with AWS Fargate and builds on the same isolation controls and compliance that are available for EC2 customers. <span style="background-color:#5a5a5a;border-radius:8px;color:#FF9900;padding:0.21rem">Your compute instances are located in a Virtual Private Cloud (VPC) with an IP range that you specify.</span>,You decide which instances are exposed to the Internet and which remain private.</p><ol><li>Your EC2 instances use an IAM role to access the ECS service. As an Amazon EC2 customer, you have root access to the operating system of your container instances.</li><li>Your ECS tasks use an IAM role to access services and resources.</li><li>Security Groups and networks ACLs allow you to control inbound and outbound network access to and from your instances.</li></ol></li><li><span style="background-color:#5a5a5a;border-radius:8px;color:#FF9900;padding:0.21rem">Troubleshooting steps for containers include</span><ol><li>Verify that the Docker daemon is running on the container instance</li><li>Verify that the Docker Container daemon is running on the container instance</li><li>Verify that the container agent is running on the container instance</li><li><strong>Verify that the IAM instance profile has the necessary permissions</strong></li></ol></li><li><span style="background-color:#5a5a5a;border-radius:8px;color:#FF9900;padding:0.21rem">Deployment strategies</span><ol><li><p><strong>Rolling update</strong>‚Äî replace current running version with latest.</p></li><li><p><strong>Blue/Green</strong>‚Äî Verify the new deployment before sending production traffic to it</p></li></ol></li></ol></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/FAQ/docs/notes_vpc"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">¬´ VPC</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/FAQ/docs/notes_cfm"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">CloudFormation ¬ª</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#i-introduction" class="table-of-contents__link">I. Introduction</a></li><li><a href="#ii-fargate" class="table-of-contents__link">II. Fargate</a></li><li><a href="#iii-eks" class="table-of-contents__link">III. EKS</a></li><li><a href="#iv-ecs-tips" class="table-of-contents__link">IV. ECS Tips</a></li></ul></div></div></div></div></main></div></div></div>
<script src="/FAQ/styles.e3d237d5.js"></script>
<script src="/FAQ/runtime~main.e2ff413d.js"></script>
<script src="/FAQ/main.40da985c.js"></script>
<script src="/FAQ/2.eacc328a.js"></script>
<script src="/FAQ/3.5084f581.js"></script>
<script src="/FAQ/66.73ad6aef.js"></script>
<script src="/FAQ/67.520034c4.js"></script>
<script src="/FAQ/935f2afb.a6a00775.js"></script>
<script src="/FAQ/17896441.17a33e11.js"></script>
<script src="/FAQ/b81e6e6b.4e6c6fce.js"></script>
</body>
</html>