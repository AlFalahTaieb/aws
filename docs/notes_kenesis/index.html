<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.65">
<title data-react-helmet="true">Kenesis | AWS SAA-C02 Ressources</title><meta data-react-helmet="true" name="docsearch:version" content="current,latest"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Kenesis | AWS SAA-C02 Ressources"><meta data-react-helmet="true" name="description" content="export const Quote = ({ children, color }) =&gt; ("><meta data-react-helmet="true" property="og:description" content="export const Quote = ({ children, color }) =&gt; ("><meta data-react-helmet="true" property="og:url" content="https://AlFalahTaieb.github.io/aws/docs/notes_kenesis"><link data-react-helmet="true" rel="shortcut icon" href="/aws/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://AlFalahTaieb.github.io/aws/docs/notes_kenesis"><link rel="stylesheet" href="/aws/styles.d664286d.css">
<link rel="preload" href="/aws/styles.e3d237d5.js" as="script">
<link rel="preload" href="/aws/runtime~main.5987bc8c.js" as="script">
<link rel="preload" href="/aws/main.db8832c0.js" as="script">
<link rel="preload" href="/aws/2.eacc328a.js" as="script">
<link rel="preload" href="/aws/3.5084f581.js" as="script">
<link rel="preload" href="/aws/66.73ad6aef.js" as="script">
<link rel="preload" href="/aws/67.520034c4.js" as="script">
<link rel="preload" href="/aws/935f2afb.52a1d31c.js" as="script">
<link rel="preload" href="/aws/17896441.17a33e11.js" as="script">
<link rel="preload" href="/aws/35fc09ca.a5873e1b.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" target="_self" href="/aws/docs/start"><img class="navbar__logo" src="/aws/img/logo.svg" alt="My Site Logo"><strong class="navbar__title">AWS SAA-C02 Ressources</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/aws/docs/">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://alfelah.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Taieb</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">üåú</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">üåû</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" target="_self" href="/aws/docs/start"><img class="navbar__logo" src="/aws/img/logo.svg" alt="My Site Logo"><strong class="navbar__title">AWS SAA-C02 Ressources</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/aws/docs/">Docs</a></li><li class="menu__list-item"><a href="https://alfelah.com" target="_blank" rel="noopener noreferrer" class="menu__link">Taieb</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">AWS Certified Solutions Architect Guide</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/start">Getting Started üèéÔ∏è</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/raz">Regions &amp; AZ</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_sg">Security Groups</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_iam">IAM</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_ec2">EC2</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_asg">ASG</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_elb">ELB</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_ebs_efs">EBS &amp; EFS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_fsx">FSx</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_s3">S3</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_storage_ex">Storage Extras</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_athena">Athena</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_datasync">DataSync</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_cli_sdk">CLI &amp; SDK</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_rds">RDS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_redshift">Redshift</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_lambda">Lambda</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_dynamodb">DynamoDB</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_apig">API Gateway</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_cognito">Cognito</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_ec">ElastiCache</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_r53">Route 53</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_cf">CloudFront</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_bs">BeanStalk</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_sqs">SQS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_sns">SNS</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/aws/docs/notes_kenesis">Kenesis</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_cw">CloudWAtch</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_ct">CloudTrail</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_kms">KMS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_ssm">SSM</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_sw">Shield &amp; WAF</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_vpc">VPC</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_ecs">ECS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_cfm">CloudFormation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_ss">SWF &amp; Step Function</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_os">Other Services</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_dr">Disaster Recovery</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_hpc">HPC</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes_fp">Five Pillars</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/aws/docs/notes">Notes for AWS Certified Solutions Architect Associate</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Kenesis</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="i-introduction"></a>I. Introduction<a aria-hidden="true" tabindex="-1" class="hash-link" href="#i-introduction" title="Direct link to heading">#</a></h2><ol><li><p><strong>It is a managed alternative to Kafka, fully serverless.</strong></p></li><li><p>Great for application logs, metrics, IoT, real-time big data, click streams.</p></li><li><p>Great for streaming processing frameworks (Spark, NiFi etc).</p></li><li><p>Data is automatically replicated to three AZs.</p></li><li><p>Security</p><ol><li>In-flight</li><li>At-rest</li><li>Client-side (harder)</li><li>VPC endpoints for private access</li></ol></li><li><p>Types</p><ol><li><strong>Kinesis Streams</strong>: low latency streaming ingest at scale</li><li><strong>Kinesis Analytics</strong>: perform real-time analytics on streams using SQL</li><li><strong>Kinesis Firehose:</strong> load data to S3, RDS, Redshift, ES, Splunk (NOT S3 Select or Redshift Spectrum)</li></ol></li></ol><p><img alt="Kenesis AWS" src="/aws/assets/images/kenesis1-c918385542bcf6be0611218fd2e42f42.png"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="ii-streams"></a>II. Streams<a aria-hidden="true" tabindex="-1" class="hash-link" href="#ii-streams" title="Direct link to heading">#</a></h2><ol><li>Streams are divided in ordered shards / partitions.</li><li><strong>Data retention is one day by default, can be extended up to 7.</strong></li><li>Ability to reprocess/replay data.</li><li>Multiple apps can consume same stream.</li><li>Once data is in stream, it cannot be deleted (immutable).</li><li>One stream is made of many different shards (stream = logical group of shards).</li><li>A shard is the base throughput unit of Kinesis data stream. It is an append-only log and a unit of streaming capability. </li><li><strong>A shard contains an ordered sequence of records ordered by arrival time.</strong></li><li>1MB/s or 1000msgs/s write per shard (incoming).</li><li>2MB/s at read per shard (outgoing).</li><li><strong>In a case where multiple consumer applications have total reads exceeding the per-shard limits, you need to increase the number of shards in the Kinesis data stream.</strong></li><li><strong>You cannot increase the number of read transactions per shard. Read throttling is enabled by default for Kinesis data streams. If you‚Äôre still experiencing performance issues you must increase the number of shards.</strong></li><li>Billing is per shard provisioned.</li><li>A record is the unit of data stored in a Kinesis stream. </li><li>Record = Sequence # + Partition Key + Data Blob</li><li>A partition key is usually a meaningful identifier such as userID or timestamp. It is used to segregate and route data records to different shards of a stream.</li><li>A sequence number is a unique identifier for each record. Sequence number is assigned by Amazon Kinesis when a data producer calls <code>PutRecord</code> or <code>PutRecords</code> operation to add data to an Amazon Kinesis data stream.</li><li>Batching available or per message calls.</li><li>You can monitor shard-level metrics in Kinesis Data Streams using CloudWatch and KCL.</li><li><span style="background-color:#5a5a5a;border-radius:8px;color:#FF9900;padding:0.21rem">Number of shards can evolve over time (split or merge).</span></li></ol><p><img alt="Kenesis AWS" src="/aws/assets/images/kenesis2-2b1cef5c3306d1f30c5d6ce4c62f658b.png"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="iii-producers"></a>III. Producers<a aria-hidden="true" tabindex="-1" class="hash-link" href="#iii-producers" title="Direct link to heading">#</a></h2><ol><li><p>Producers can write to Kinesis using <code>PutRecord</code> API through CLI or SDK.</p></li><li><p>You need to send message key and data.</p></li><li><p>Message key ‚Üí Same shard</p></li><li><p>Message sent gets a &quot;sequence key&quot;</p></li><li><p>Shard balancing is done be key and should be chosen wisely.</p></li><li><p>You might get <code>ProvisionedThroughputExceeded</code> if go over the limit, use retry or exponential backoff to reduce rate.</p><ol><li>Happens when you exceed the limit MB/s or TPS per shard</li><li>Make sure you don&#x27;t have a hot shard</li><li><span style="background-color:#5a5a5a;border-radius:8px;color:#FF9900;padding:0.21rem">Solution: Increase shard and/or ensure a good partition key (high cardinality)</span></li></ol></li><li><p>Consumers</p><ol><li>Can use CLI/SDK or client libraries aka KCL (Node, python etc)</li><li>KCL uses DynamoDB to checkpoint offsets and track other workers to share among shards</li></ol></li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="iv-firehose"></a>IV. Firehose<a aria-hidden="true" tabindex="-1" class="hash-link" href="#iv-firehose" title="Direct link to heading">#</a></h2><ol><li>Fully managed, no administration, automatic scaling and serverless</li><li>Load data into Redshift, S3, ES, Splunk</li><li>Near real-time ‚Äî 60s latency minimum for non-full batches or 32MB of data at a time</li><li>Supports many data formats, conversions, transformations and compression</li><li>Can convert incoming data into another format before storing e.g. JSON ‚Üí ORC</li><li>Only pay for the data going through firehose</li></ol><p><img alt="Kenesis AWS" src="/aws/assets/images/kenesis3-83b04fb506c1380d2251b251f1e2ace4.png"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="v-kinesis-data-streams-vs-firehose"></a>V. Kinesis Data Streams vs Firehose<a aria-hidden="true" tabindex="-1" class="hash-link" href="#v-kinesis-data-streams-vs-firehose" title="Direct link to heading">#</a></h2><ol><li><p>Kinesis Data Stream</p><ol><li>Write custom code for producer and consumer</li><li>Real-time (~200ms)</li><li>Must manage scaling (shard splitting and merging)</li><li>Data storage for 1-7 days, replay capability, multi-consumers</li></ol></li><li><p>Firehose</p><ol><li>Fully managed, send to S3/ES/Splunk/Redshift </li><li>Serverless data transformation with lambda</li><li>Near real-time (60s)</li><li>Automated scaling</li><li>No data storage</li></ol></li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="vi-kinesis-analytics"></a>VI. Kinesis Analytics<a aria-hidden="true" tabindex="-1" class="hash-link" href="#vi-kinesis-analytics" title="Direct link to heading">#</a></h2><ol><li>Perform real-time analytics on Kinesis Streams using SQL.</li><li>Pay for actual consumption rate</li><li>Can create streams out of query results</li><li>Kinesis Data Analytics<ol><li>Auto scaling</li><li>Managed</li><li>Real-time</li></ol></li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="vii-kinesis-vs-sqs-fifo"></a>VII. Kinesis vs SQS FIFO<a aria-hidden="true" tabindex="-1" class="hash-link" href="#vii-kinesis-vs-sqs-fifo" title="Direct link to heading">#</a></h2><p>Assuming 100 trucks, 5 shards and 1 FIFO queue</p><ol><li><p>Kinesis Data Streams</p><ol><li>Avg 20 trucks per shard</li><li>Trucks will have their data ordered within each shard</li><li>Max consumers in parallel = 5</li><li>Can receive up to 5MB/s of data</li><li>Can handle large real-time data compared to SQS FIFO</li><li><span style="background-color:#5a5a5a;border-radius:8px;color:#FF9900;padding:0.21rem">Guaranteed ordering using partition key</span></li></ol></li><li><p>SQS FIFO</p><ol><li>Only one FIFO queue</li><li>100 GroupIDs</li><li>100 consumers (one per GroupID)</li><li>300msgs/s or 3000 (when using batches)</li></ol></li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="viii-sqs-vs-sns-vs-kinesis"></a>VIII. SQS vs SNS vs Kinesis<a aria-hidden="true" tabindex="-1" class="hash-link" href="#viii-sqs-vs-sns-vs-kinesis" title="Direct link to heading">#</a></h2><p><img alt="Kenesis AWS" src="/aws/assets/images/kenesis4-06101bb9e37c7730509151f87f527c1a.png"></p><p><strong>Kinesis use cases</strong></p><ol><li>Routing related records to the same record processor (as in streaming MapReduce).</li><li>Ordering of records.</li><li>Ability for multiple applications to consume the same stream concurrently.</li><li>Ability to consume records in the same order a few hours later.</li></ol><p><strong>SQS use cases</strong></p><ol><li>Messaging semantics (such as message-level ack/fail) and visibility timeout.</li><li>Individual message delay.</li><li>Dynamically increasing concurrency/throughput at read time.</li><li>Leveraging Amazon SQS‚Äô ability to scale transparently e.g. you buffer requests and the load changes as a result of occasional load spikes.</li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="ix-kinesis-tips"></a>IX. Kinesis Tips<a aria-hidden="true" tabindex="-1" class="hash-link" href="#ix-kinesis-tips" title="Direct link to heading">#</a></h2><ol><li><strong>You can increase per-shard limit for reads if facing hot shard using <code>UpdateShardCount</code> API.</strong></li><li>Kinesis Data Streams can automatically encrypt sensitive data as a producer enters it into a stream. It uses KMS master keys for encryption.</li><li>You are charged for each shard at an hourly rate.</li><li>You can create Directed Acyclic Graphs (DAGs) of Amazon Kinesis Applications and data streams.</li><li><span style="background-color:#5a5a5a;border-radius:8px;color:#FF9900;padding:0.21rem">Each shard can support up to five read transactions per second.</span></li><li>If the shard iterator expires immediately before you can use it, this might indicate that the DynamoDB table used by Kinesis does not have enough capacity to store the lease data. This situation is more likely to happen if you have a large number of shards. To solve this problem, increase the write capacity assigned to the shard table.</li><li>You can privately access Kinesis Data Streams APIs from your Amazon Virtual Private Cloud (VPC) by creating VPC Endpoints. With VPC Endpoints, the routing between the VPC and Kinesis Data Streams is handled by the AWS network without the need for an Internet gateway, NAT gateway, or VPN connection.</li><li>You can encrypt using SSE or write encrypted data directly to stream.</li></ol></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/aws/docs/notes_sns"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">¬´ SNS</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/aws/docs/notes_cw"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">CloudWAtch ¬ª</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#i-introduction" class="table-of-contents__link">I. Introduction</a></li><li><a href="#ii-streams" class="table-of-contents__link">II. Streams</a></li><li><a href="#iii-producers" class="table-of-contents__link">III. Producers</a></li><li><a href="#iv-firehose" class="table-of-contents__link">IV. Firehose</a></li><li><a href="#v-kinesis-data-streams-vs-firehose" class="table-of-contents__link">V. Kinesis Data Streams vs Firehose</a></li><li><a href="#vi-kinesis-analytics" class="table-of-contents__link">VI. Kinesis Analytics</a></li><li><a href="#vii-kinesis-vs-sqs-fifo" class="table-of-contents__link">VII. Kinesis vs SQS FIFO</a></li><li><a href="#viii-sqs-vs-sns-vs-kinesis" class="table-of-contents__link">VIII. SQS vs SNS vs Kinesis</a></li><li><a href="#ix-kinesis-tips" class="table-of-contents__link">IX. Kinesis Tips</a></li></ul></div></div></div></div></main></div></div></div>
<script src="/aws/styles.e3d237d5.js"></script>
<script src="/aws/runtime~main.5987bc8c.js"></script>
<script src="/aws/main.db8832c0.js"></script>
<script src="/aws/2.eacc328a.js"></script>
<script src="/aws/3.5084f581.js"></script>
<script src="/aws/66.73ad6aef.js"></script>
<script src="/aws/67.520034c4.js"></script>
<script src="/aws/935f2afb.52a1d31c.js"></script>
<script src="/aws/17896441.17a33e11.js"></script>
<script src="/aws/35fc09ca.a5873e1b.js"></script>
</body>
</html>